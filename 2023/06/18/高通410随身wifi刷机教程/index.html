<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>高通410随身wifi刷机教程 | 柊</title><meta name="author" content="棨"><meta name="copyright" content="棨"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#59b9c6"><meta name="description" content="高通410随身wifi刷机教程，适用于基于高通410的cpu随身wifi。(部分教程已经过期，仅供参考)">
<meta property="og:type" content="article">
<meta property="og:title" content="高通410随身wifi刷机教程">
<meta property="og:url" content="https://chaoqijiang.github.io/2023/06/18/%E9%AB%98%E9%80%9A410%E9%9A%8F%E8%BA%ABwifi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B/index.html">
<meta property="og:site_name" content="柊">
<meta property="og:description" content="高通410随身wifi刷机教程，适用于基于高通410的cpu随身wifi。(部分教程已经过期，仅供参考)">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://chaoqijiang.github.io/Image/avatar.png">
<meta property="article:published_time" content="2023-06-18T12:12:00.000Z">
<meta property="article:modified_time" content="2025-10-11T16:40:15.192Z">
<meta property="article:author" content="棨">
<meta property="article:tag" content="protected">
<meta property="article:tag" content="刷机">
<meta property="article:tag" content="搞事情">
<meta property="article:tag" content="随身WiFi">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://chaoqijiang.github.io/Image/avatar.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "高通410随身wifi刷机教程",
  "url": "https://chaoqijiang.github.io/2023/06/18/%E9%AB%98%E9%80%9A410%E9%9A%8F%E8%BA%ABwifi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B/",
  "image": "https://chaoqijiang.github.io/Image/avatar.png",
  "datePublished": "2023-06-18T12:12:00.000Z",
  "dateModified": "2025-10-11T16:40:15.192Z",
  "author": [
    {
      "@type": "Person",
      "name": "棨",
      "url": "https://chaoqijiang.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://chaoqijiang.github.io/2023/06/18/%E9%AB%98%E9%80%9A410%E9%9A%8F%E8%BA%ABwifi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=5.5.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#59b9c6')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          const hour = new Date().getHours()
          const isNight = hour <= 6 || hour >= 24
          if (theme === undefined) isNight ? activateDarkMode() : activateLightMode()
          else theme === 'light' ? activateLightMode() : activateDarkMode()
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"pagination":{"enable":false,"hitsPerPage":8},"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":30,"highlightFullpage":true,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: {"chs_to_cht":"已切换为繁体中文","cht_to_chs":"已切换为简体中文","day_to_night":"已切换为深色模式","night_to_day":"已切换为浅色模式","bgLight":"#165e83","bgDark":"#507ea4","position":"bottom-left"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '高通410随身wifi刷机教程',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 8.0.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/Image/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">47</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">58</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">40</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴/归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 链接</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/Image/topImage.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="/Image/Logo.ico" alt="Logo"><span class="site-name">柊</span></a><a class="nav-page-title" href="/"><span class="site-name">高通410随身wifi刷机教程</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴/归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 链接</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">高通410随身wifi刷机教程</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-06-18T12:12:00.000Z" title="发表于 2023-06-18 20:12:00">2023-06-18</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-10-11T16:40:15.192Z" title="更新于 2025-10-12 00:40:15">2025-10-12</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%90%9E%E4%BA%8B%E6%83%85/">搞事情</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">11.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>40分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>本教程适用于基于高通410的cpu随身wifi。</p>
<h2 id="基本样式"><a href="#基本样式" class="headerlink" title="基本样式"></a>基本样式</h2><p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618201847745.png" alt="image-20230618201847745"></p>
<p>如果需要刷openwrt和Debian，只有纸盒系和类纸盒的uz801、sp970，其它型号不能刷。（不确定 没尝试过）</p>
<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><p>简单说几个常见问题: </p>
<ul>
<li>SIM卡要插对；</li>
<li>天线别弄掉了（弄掉了再插回去）；</li>
<li>板子所处位置的信号不能太差，台式电脑建议用后面主板的USB口，有些电脑前置USB口容易供电不足；</li>
<li>很多软件问题可以重启或者更换电脑就能解决；</li>
<li>刷机前最好先备份；</li>
<li>拿到板子后插卡确认能否识别sim卡以及数据wifi功能是否正常，然后撬开外壳确定自己的板子是什么型号。</li>
</ul>
<h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><p>​	工具文件可能被系统报毒删除，所以以win10为例，建议新建一个随身WiFi文件夹，然后在Windows安全中心一病毒和威胁防护一病毒威胁防护设置一管理设置一排除项一添加排除项，把文件夹添加进去，然后把刷机文件下载到这里，就不会被系统删除了，其它杀毒软件也可以类似这样设置。</p>
<h3 id="安装驱动"><a href="#安装驱动" class="headerlink" title="安装驱动"></a>安装驱动</h3><p>需要提前安装高通的驱动：高通板子刷机需要安装<code>9008驱动</code>和<code>adb驱动</code>，打开并安装文件里的<code>9008driver</code></p>
<p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618202325523.png" alt="image-20230618202325523"></p>
<p>把板子插上电脑，等待板子完全开机后，输入命令: <code>adb devices</code></p>
<p>如果显示有设备连接就说明adb正常 (有些板子adb功能没有打开，可以在本版块搜索开启方法)（比如直接9008刷入其他刷完的包）</p>
<h3 id="进入9008的方法"><a href="#进入9008的方法" class="headerlink" title="进入9008的方法"></a>进入9008的方法</h3><p>需要9008刷机时再开启此端口。</p>
<h4 id="adb命令进入"><a href="#adb命令进入" class="headerlink" title="adb命令进入"></a>adb命令进入</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">adb reboot edl</span><br></pre></td></tr></table></figure>

<h4 id="通过按键进入"><a href="#通过按键进入" class="headerlink" title="通过按键进入"></a>通过按键进入</h4><p>按住板子的恢复键，插入电脑一两秒后听到叮咚一声再松手，在设备管理器里看到端口有9008就表示成功了。（不是所有按键都可以进入9008，进入不了参考下一条方法）</p>
<h4 id="其他方法"><a href="#其他方法" class="headerlink" title="其他方法"></a>其他方法</h4><p>可以尝试短接usb数据针脚（d+ d-）插入电脑再松开。</p>
<p>成功进入后可以在端口中找到9008字样的设备。</p>
<p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618202835177.png" alt="image-20230618202835177"></p>
<h1 id="备份"><a href="#备份" class="headerlink" title="备份"></a>备份</h1><p>这一步非常重要！不建议拿到板子后直接刷的rom包，应该先备份好当前的rom，之后再刷。只要硬件没坏都能救活。</p>
<p>如果自己的板子系统是阉割版的，比如没有热点和网络共享等，可以刷一下别的设备的system包，其它情况不太需要刷别的文件。</p>
<p>备份主要有三个过程：备份基带、Miko loader制作救砖包（全量备份）、</p>
<h2 id="备份固件-miko"><a href="#备份固件-miko" class="headerlink" title="备份固件-miko"></a>备份固件-miko</h2><h3 id="安装Miko"><a href="#安装Miko" class="headerlink" title="安装Miko"></a>安装Miko</h3><p>找到miko文件夹，双击miko安装，直接默认就行了，记住安装路径，安装完成后把文件夹内的loader复制到miko的安装目录，替换掉原来的loader.exe。接着创建loader的快捷方式到桌面。</p>
<h3 id="loader备份"><a href="#loader备份" class="headerlink" title="loader备份"></a>loader备份</h3><p>让板子进入9008模式，打开loader，按照图片数字顺序一步步来。</p>
<p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618203629046.png" alt="image-20230618203629046"></p>
<ol>
<li>点read；</li>
<li>点partition backup；</li>
<li>双击下面double click to open save folder；</li>
<li>选好救砖包生成的路径：点load partition structure；</li>
<li>点击全选按钮选中所有的分区；</li>
<li>点read full image就能制作刷机救砖包，大概5分钟以内。</li>
</ol>
<p><strong>保存好这个名为.bin的单文件，后期救砖需要它</strong></p>
<p>刷机&#x2F;救砖方法图片也标注了顺序，分别点flash，emmc block0，flasher，double click….， flash!</p>
<p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618203939677.png" alt="image-20230618203939677"></p>
<h2 id="备份固件-QPT"><a href="#备份固件-QPT" class="headerlink" title="备份固件-QPT"></a>备份固件-QPT</h2><p>用Qualcomm Premium Tool（QPT）备份全部分区文件。</p>
<h3 id="激活QPT（只需要激活一次）"><a href="#激活QPT（只需要激活一次）" class="headerlink" title="激活QPT（只需要激活一次）"></a>激活QPT（只需要激活一次）</h3><p>打开它的文件夹，有个提示先注册的程序，<strong>注意要把电脑音量调低</strong>!。然后点开它后可能会提示安装一些东西，同意就行了，没有的话不用管，弹出窗口点击GenerateKey,生成的key放在你知道的文件夹内。</p>
<p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618204354428.png" alt="image-20230618204354428"></p>
<p>打开Qualcomm Premium Tool程序，左上菜单栏找到help-active,选择刚才生成的key就能激活这个软件了。</p>
<p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618204511362.png" alt="image-20230618204511362"></p>
<h3 id="备份-1"><a href="#备份-1" class="headerlink" title="备份"></a>备份</h3><p>按照前面介绍的方法使板子进入9008模式，在Qualcomm Premium Tool按照图片数字一步一步进行。</p>
<p>注意，如果前面Miko备份完，记得拔掉棒子再次进入9008后再进行备份。</p>
<p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618205206475.png" alt="image-20230618205206475"></p>
<ol>
<li>Qualcomm选项卡</li>
<li>partition子选项卡</li>
<li>scan单选按钮</li>
<li>Do job按钮</li>
<li>backup单选按钮</li>
<li>backup ALL复选框</li>
<li>Do job按钮</li>
</ol>
<p><strong>备份的文件保存好，后续可能有用</strong></p>
<p>如果需要刷写某些分区，点击scan识别分区后，点write, 再选要刷如果需要刷写某些分区，点击扫描识别分区后，点写，再选要刷的分区，点Do job后选择分区文件，就能完成刷写该分区。的分区，点做好后选择分区文件，就能完成刷写该分区。</p>
<h2 id="备份基带（需要进行root操作）"><a href="#备份基带（需要进行root操作）" class="headerlink" title="备份基带（需要进行root操作）"></a>备份基带（需要进行root操作）</h2><h3 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h3><ul>
<li>在设备管理器中的<code>端口（COM和LPT）</code>中可以看到9091或901D字样的设备<ul>
<li><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618201209783.png" alt="image-20230618201209783"></li>
</ul>
</li>
<li><code>通用串行总线设备</code>中看到<code>ADB interface</code>字样的设备（或者在最开头的几个选项卡中）<ul>
<li><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618201228226.png" alt="image-20230618201228226"></li>
</ul>
</li>
</ul>
<h3 id="root"><a href="#root" class="headerlink" title="root"></a>root</h3><p>备份qcn和root。需要先进行root,简单点的办法就是安装magisk,再刷一下修补过的boot文件就有root了。当然我更建议自<br>己修补boot,不用等别人做好，出问题的概率也更小。</p>
<p>下面是如何自己动手获得root权限:</p>
<ol>
<li><p>首先安装ardc,这是一个投屏软件，解决板子没有屏幕无法操作的问题，它的操作逻辑是鼠标左键为点击功能，右键为返回。</p>
</li>
<li><p>安装完ardc后先别打开，检查一下任务管理器中，有adb或者android debug bridge程序在后台的话记得停掉，再把板子插到电脑上正常启动，打开ardc等待画面变化，成功后会停在深蓝色界面，然后把鼠标箭头移到此界面，右键点击两下，如果没有出现桌面，需要安装一个第三方桌面启动器，把我提供的apk文件里的launcher从电脑直接托到ardc界面就会自动给板子安装。</p>
<ul>
<li><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618205724109-1687093045038-2.png" alt="image-20230618205724109"></li>
</ul>
</li>
<li><p>等五秒后在主界面点一下鼠标右键，应该会出现选择主屏幕应用选择，点launcher和始终。</p>
<ul>
<li><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618205818554.png" alt="image-20230618205818554"></li>
</ul>
</li>
<li><p>然后就能看到板子的系统界面了，接着安装es文件管理器和magisk,也是直接拖到ardc界面自动安装，装好后点开文件管理<br>器，进入下载文件夹，把之前Qualcomm备份的boot文件直接托到这里，就会复制过来了(几秒钟，点下面的刷新就会显示出来) </p>
<ul>
<li><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618205930680.png" alt="image-20230618205930680"></li>
<li><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618205941815.png" alt="image-20230618205941815"></li>
</ul>
</li>
<li><p>退出es,点开magisk,找到图片提示的位置</p>
<ul>
<li><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618210010973.png" alt="image-20230618210010973"></li>
</ul>
</li>
<li><p>安装&gt;下一步&gt;选择并修补一个文件，选择刚才复制过来的boot,然后开始，等待它修补完成，退出并来到es文件管理器，进入下载，发现修补好的boot文件名太长了，长按后重命名为magiskboot.img。再点击ardc菜单最后一个&gt;&gt;;弹出的cmd这里(实际就是这个软件也集成了adb功能，这里直接使用它的)</p>
<ul>
<li><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618210302473.png" alt="image-20230618210302473"></li>
</ul>
</li>
<li><p>输入命令: </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">adb pull /sdcard/Download/magiskboot.img D:/xxx</span><br></pre></td></tr></table></figure>

<p>这里D:&#x2F;xxx换成你自己的路径(斜杠朝左还是朝右都可以)，接着按回车就会把magiskboot.img导出到你的电脑上的指定位置。</p>
</li>
<li><p>再输入命令: </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">adb reboot bootloader</span><br></pre></td></tr></table></figure>

<p>板子会重启到fastboot模式，然后输入命令: </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">fastboot flash boot </span><br></pre></td></tr></table></figure>

<p>后再按个空格键，接着把电脑上 上一步备份的boot文件<code>magiskboot.img</code>拖到这里，会自动生成文件路径名成文件路径名。</p>
<ul>
<li><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618210626935.png" alt="image-20230618210626935"></li>
</ul>
</li>
<li><p>再按回车等待几秒完成后输入命令:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">fastboot reboot</span><br></pre></td></tr></table></figure>

<p>板子重启后打开magisk (可能得多等会)，看到下面四个图标，第二个就是超级用户，那么root就完成了。</p>
<ul>
<li><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618210724332.png" alt="image-20230618210724332"></li>
</ul>
</li>
</ol>
<h3 id="备份-2"><a href="#备份-2" class="headerlink" title="备份"></a>备份</h3><ol>
<li><p>下面是备份qcn的工作，依然在ARDC的&gt;&gt;这里的cmd后输入命令: </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">adb shell su</span><br></pre></td></tr></table></figure>

<p>然后会显示shell申请权限，点永久就行了，接着在magisk的超级用户里看看shell授权成功与否。</p>
<ul>
<li><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618213147447.png" alt="image-20230618213147447"></li>
</ul>
</li>
<li><p>关掉ardc，同时在任务管理器里如果发现adb还在后台也要关掉，然后打开星海svip这个软件 (免安装)，如果打开时提示缺少库文件，安装我提供的微软软件包，装好后最好重启一下电脑就能打开星海了，以后如果操作没问题，这个软件还是报错的就重启电脑<br>选择高通，再点联机会出现设备信息，找到高通强开1（如果不行也可以试试强开2），点一键执行，在设备管理器上查看是否有端口901D（如果开启失败可以尝试手动开启，文件夹里有命令代码）</p>
<ul>
<li><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618213321287.png" alt="image-20230618213321287"></li>
<li><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618213402181.png" alt="image-20230618213402181"></li>
</ul>
</li>
<li><p>接着备份qcn，一键执行，选择qcn文件生成路径，正常情况就能备份qcn成功，如果不行就检查901d端口或者重启电脑，备份的qcn一般在500多k，远小于这个大小的应该是备份失败了，建议再来一次。</p>
<ul>
<li><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618213444362.png" alt="image-20230618213444362"></li>
</ul>
</li>
</ol>
<h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><p>高通工具的备份和miko的备份的不同：</p>
<ul>
<li>miko它是把所有的分区全部备份成一个单个的文件</li>
<li>高通的这个备份它是把每一个分区备份成单独的文件</li>
</ul>
<p>两者两种方式备份出来的文件数量有区别，但本质上来说备份的是同一个东西。</p>
<p>高通的这个工具备份出来的这个分区文件是可以用其他工具来打开并且提取里面的内容的</p>
<p>而miko的呢不行。</p>
<p>同样的在还原的时候，因为刷完Debian以后所有的分区都会被改动掉，所以用高通的工具去还原会发现对应不上分区。所以得用miko的工具来还原。</p>
<h1 id="刷机"><a href="#刷机" class="headerlink" title="刷机"></a>刷机</h1><h2 id="android"><a href="#android" class="headerlink" title="android"></a>android</h2><p>Android，一般情况刷回自己的包就用Miko loader这个软件，比较简单。刷单个分区，可以用Qualcomm工具，前面都已经介绍；</p>
<p>或者进fastboot模式，用命令刷分区，比如刷system分区，命令就是fastboot flash system 加上分区路径 (和前面刷boot一样，直接<br>拖到这里，如果失败，把文件放到adb目录下，把分区路径换成分区文件名system.img也能刷，效果更好)</p>
<h2 id="Debian"><a href="#Debian" class="headerlink" title="Debian"></a>Debian</h2><p>刷机过程作者网址有介绍，001b 001c sp970 uz801作者给了boot和firmware文件用来替换。如果刷后不识别手机卡，可以这样<br>试试看：<br>	参考了酷友lkiuyu 的动态，刷回安卓，恢复出厂设置，再root后用星海擦写基带 (擦写基带在fastboot模式下)，接着写入自己的qcn (写入qcn也要开启901d端口)，才能装Debian，boot要替换成作者提供的001c的，别用自己的。firmware需要替换成自己备份的 (把Qualcomm工具备份的NON-HLS.bin用diskgenius的虚拟磁盘打开并提取出来，接着用winscp登录Debian后把它复制到&#x2F;home&#x2F;user下，再ssh登录Debian，sudo -i获得权限，再用命令cp -rf &#x2F;home&#x2F;user&#x2F;你提取的基带文件&#x2F;*&#x2F;usr&#x2F;lib&#x2F;firmware&#x2F;，完成替换，重启板子基带应该就能用了。</p>
<p>项目地址：</p>
<p>大致步骤如下：</p>
<ol>
<li><p>重启到fastboot模式</p>
<ul>
<li><pre><code>//使用adb连接到设备
adb devices

//重启到fastboot
adb reboot fastboot
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">   - 重启完事后可以在设备管理器中ADB相关的设备里面有个`Fastboot interface`字样的设备。出现这个设备的时候就证明设备已经重启到fastboot模式下了。</span><br><span class="line"></span><br><span class="line">2. 解压Debian文件夹中的 `base-generic.zip` 文件，进入解压出来的文件夹中</span><br><span class="line"></span><br><span class="line">   - ![image-20230618215120258](./Image/随身WiFi刷机教程.assets/image-20230618215120258.png)</span><br><span class="line"></span><br><span class="line">3. 点击地址栏，删除其中的内容，然后输入 `cmd` 打开cmd</span><br><span class="line"></span><br><span class="line">4. 在cmd的命令提示符中输入`flash.bat`，然后回车执行。</span><br><span class="line"></span><br><span class="line">   - ![image-20230618215310151](./Image/随身WiFi刷机教程.assets/image-20230618215310151.png)</span><br><span class="line"></span><br><span class="line">5. 中途会提示按任意键继续，根据提示按下任意一个键进行下一步。中途可能会听到设备弹出后再插入的提示音。继续按空格即可。</span><br><span class="line"></span><br><span class="line">6. 回到上一级，解压 `debian.zip` 文件，并进入解压出来的文件夹中</span><br><span class="line"></span><br><span class="line">   - ![image-20230618215517226](./Image/随身WiFi刷机教程.assets/image-20230618215517226.png)</span><br><span class="line"></span><br><span class="line">7. 再次清空地址栏，输入cmd，打开cmd窗口。</span><br><span class="line"></span><br><span class="line">8. 继续flash.bat，回车运行。</span><br><span class="line"></span><br><span class="line">   - ![image-20230618215614847](./Image/随身WiFi刷机教程.assets/image-20230618215614847.png)</span><br><span class="line"></span><br><span class="line">9. 继续按照提示按下任意按键。这回可能就需要一段时间了，因为正在推送系统到设备。</span><br><span class="line"></span><br><span class="line">   </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## OpenWrt</span><br><span class="line"></span><br><span class="line">OpenWrt刷机就简单多了，进入fastboot模式打开脚本自动刷原作者仍只提供了001b版本，其它型号直接在本版块搜索，有不少酷友编译。如果遇到问题可以到我另一个动态看看解决办法。最后说一下，Debian和openwrt都有adb功能，刷这些系统都可以进fastboot模式刷，不用回到安卓。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># Linux相关</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 刷完初次进入linux时的准备工作</span><br><span class="line"></span><br><span class="line">检查`网络适配器`中是否存在一个基于远程NDIS的Internet共享…</span><br><span class="line"></span><br><span class="line">如果不存在，且在`其他设备`中存在一个名叫 `RNDIS`的设备，则右键点击这个设备，选择`更新驱动程序`，选择`浏览我的电脑以查找驱动程序`，接着 `让我从计算机上的可用驱动程序列表中选取`，拉到最下面找到 `网络适配器`，在厂商一栏中找到 `MicroSoft`，右侧的型号栏目中选择 `基于远程NDIS的Internet共享设备`。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 基础的系统配置</span><br><span class="line"></span><br><span class="line">1. 登录系统：初始用户：`user`，初始密码`1`</span><br><span class="line"></span><br><span class="line">2. 连接WIFI</span><br><span class="line"></span><br><span class="line">   ```bash</span><br><span class="line">   sudo nmtui</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
<p>会显示一个蓝色背景的界面，使用上下光标键移动，选择 <code>Activate a connection</code>（回车），选择要连接的WiFi，回车，输入wifi密码，回车。</p>
<p>连上以后wifi名的左侧会多一个*号，同时右侧会有一个 <code>Deactivate</code>断开的选项。</p>
<p>按tab键将光标移动到back，回车，选择 <code>Quit</code>回车，回到ssh界面。</p>
<p>使用 <code>sudo ifconfig</code>命令就能看到一个连上WiFi以后得到的ip地址。</p>
<p>接下来就能使用这个ip地址进行登录。此时棒子就可以不插在电脑上，插在任意一个具有供电能力的设备上都能连接上了。</p>
</li>
<li><p>配置root用户密码</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> passwd root</span><br></pre></td></tr></table></figure>

<p>接下来要输入设置的密码。注意输入密码的时候是不可见的。</p>
</li>
<li><p>切换到root用户</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> su</span><br></pre></td></tr></table></figure>


</li>
<li><p>允许root用户远程登录，重启服务或系统后生效</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;PermitRootLogin yes&quot;</span> &gt;&gt; /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure>


</li>
<li><p>修复mobian源并安装基础软件（逐行复制并执行）</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apt update</span><br><span class="line"></span><br><span class="line">apt install curl -y</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;deb http://repo.mobian-project.org/ bookworm main non-free&quot;</span> &gt; /etc/apt/sources.list.d/mobian.list</span><br><span class="line">curl -s https://repo.mobian.org/mobian.gpg &gt; /etc/apt/trusted.gpg.d/mobian.gpg</span><br><span class="line"></span><br><span class="line">apt update</span><br><span class="line"></span><br><span class="line">apt install vim wget git cron dnsutils unzip lrzsz fdisk gdisk exfat-fuse exfat-utils -y</span><br></pre></td></tr></table></figure>

<p>可能需要一段时间，耐心等待即可。</p>
</li>
<li><p>配置系统时间</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">dpkg-reconfigure tzdata</span><br></pre></td></tr></table></figure>

<p>选6 亚洲</p>
<p>然后选70 上海（亚洲 上海），需要按回车显示下一页，直到70 shanghai的选项出现，才能输入70.</p>
</li>
<li><p>配置ll命令</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;alias ll=&#x27;ls <span class="variable">$LS_OPTIONS</span> -alh&#x27;&quot;</span> &gt;&gt; ~/.bashrc</span><br></pre></td></tr></table></figure>


</li>
<li><p>修改vi配置</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;if has(&#x27;mouse&#x27;)\nset mouse-=a\nendif&quot;</span> &gt; .vimrc</span><br></pre></td></tr></table></figure>


</li>
<li><p>修改usb为主动模式</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi /usr/sbin/mobian-usb-gadget</span><br></pre></td></tr></table></figure>

<p>把下面这行添加到[ <code>setup() {</code> ]的下一行</p>
<p><code>echo host &gt; /sys/kernel/debug/usb/ci_hdrc.0/role</code></p>
<p>然后<code>:wq</code>保存退出</p>
<p>注意，此条命令一旦执行，棒子再插到电脑上就不会显示成设备了，而是作为一个独立的主机存在。</p>
</li>
<li><p>重启设备</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">reboot</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="挂载u盘、配置开启启动、安装软件"><a href="#挂载u盘、配置开启启动、安装软件" class="headerlink" title="挂载u盘、配置开启启动、安装软件"></a>挂载u盘、配置开启启动、安装软件</h2><p>由于后续所有操作都直接用root用户登陆后操作，删掉已经没用的自带用户user</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">userdel -r user</span><br></pre></td></tr></table></figure>



<h3 id="挂载u盘"><a href="#挂载u盘" class="headerlink" title="挂载u盘"></a>挂载u盘</h3><ol>
<li><p>创建用于挂载的目录</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mkdir /udisk</span><br></pre></td></tr></table></figure>


</li>
<li><p>插上U盘，查看是否已经识别到</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">fdisk -l</span><br></pre></td></tr></table></figure>

<p>可以看到Disk开头的文本，默认是挂载在<code>/dev/sda</code>目录中。</p>
<p>也有可能是sdb，一定要区分好</p>
</li>
<li><p>清理磁盘分区并新建（如果是大于2T的移动硬盘，下一条命令中的fdisk换成gdisk）</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">fdisk /dev/sda</span><br></pre></td></tr></table></figure>

<p>然后按下如下字母执行操作</p>
<ul>
<li><p>d   #删除分区</p>
<ul>
<li>可以多按几下，直到出现 <code>No partition is defined yet</code>提示没有任何分区为止。</li>
</ul>
</li>
<li><p>n   #新建分区，一路回车</p>
<ul>
<li>如果提示yes or no，输入y然后回车</li>
</ul>
</li>
<li><p>w   #保存更改</p>
<ul>
<li>如果提示yes or no，输入y然后回车</li>
</ul>
</li>
</ul>
</li>
<li><p>再用 <code>fdisk -l</code>命令查看，可以发现插入的存储设备挂载的目录可能发生了变化。<strong>记住这个目录，后面要用</strong>.</p>
<p>比如 &#x2F;dev&#x2F;sda1</p>
</li>
<li><p>格式化分区</p>
<p>ext4性能好安全性高但不兼容windows，exfat性能差安全性差但兼容windows</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mkfs.ext4 /dev/sda1</span><br><span class="line"></span><br><span class="line">或</span><br><span class="line"></span><br><span class="line">mkfs.exfat /dev/sda1</span><br></pre></td></tr></table></figure>

<p>二者选其一执行。推荐ext4格式。</p>
<p>注意，如果存储设备是金士顿的这类写入速度很慢的设备，则此过程可能会很久，甚至卡死。</p>
</li>
<li><p>挂载</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#挂载</span></span><br><span class="line">mount /dev/sda1 /udisk</span><br><span class="line"></span><br><span class="line"><span class="comment">#mount /dev/sdb1 /hdisk</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#授权</span></span><br><span class="line"><span class="built_in">chmod</span> 777 /udisk</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="配置开机行为"><a href="#配置开机行为" class="headerlink" title="配置开机行为"></a>配置开机行为</h3><ol>
<li><p>创建启动脚本</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">touch</span> /etc/rc.local</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;#!/bin/sh -e&#x27;</span> &gt; /etc/rc.local</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;exit 0&quot;</span> &gt;&gt; /etc/rc.local</span><br></pre></td></tr></table></figure>


</li>
<li><p>给权限</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x /etc/rc.local</span><br></pre></td></tr></table></figure>


</li>
<li><p>重载systemd配置管理器</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl daemon-reload</span><br></pre></td></tr></table></figure>


</li>
<li><p>启动守护进程</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl start rc-local</span><br></pre></td></tr></table></figure>


</li>
<li><p>修改启动脚本</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi /etc/rc.local</span><br></pre></td></tr></table></figure>

<p>将下方代码块中的内容复制到vi编辑器中。注意复制之前需要删除原有的数据。注意#开头的中文注释需要删除掉，因为可能会乱码</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh -e</span></span><br><span class="line"><span class="comment">#等待2秒等待设备彻底启动完成</span></span><br><span class="line"><span class="built_in">sleep</span> 2</span><br><span class="line"><span class="comment">#开机自动挂载硬盘，可以修改成fstab？</span></span><br><span class="line">mount /dev/sda1 /udisk &amp;</span><br><span class="line"><span class="comment">#等待5秒等待挂载完毕</span></span><br><span class="line"><span class="built_in">sleep</span> 3</span><br><span class="line"></span><br><span class="line"><span class="comment">#如果不安装接下来的miniDLNA，则这部分的内容不需要复制</span></span><br><span class="line"><span class="comment">#清空minidlna缓存</span></span><br><span class="line">minidlnad -R</span><br><span class="line"><span class="comment">#等待3秒等待清空完成</span></span><br><span class="line"><span class="built_in">sleep</span> 2</span><br><span class="line"><span class="comment">#启动dlna</span></span><br><span class="line">systemctl start minidlna &amp;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#如果不安装接下来的aria2，则这部分的内容不需要复制</span></span><br><span class="line"><span class="comment">#启动aria2</span></span><br><span class="line">aria2c -D --conf-path=/etc/aria2/aria2.conf &amp;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#可以试图把ddns的脚本粘贴到这里面</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">exit</span> 0</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="安装软件"><a href="#安装软件" class="headerlink" title="安装软件"></a>安装软件</h2><h3 id="samba共享"><a href="#samba共享" class="headerlink" title="samba共享"></a>samba共享</h3><ol>
<li><p>安装samba</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apt install samba samba-common-bin -y</span><br></pre></td></tr></table></figure>


</li>
<li><p>修改配置文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi /etc/samba/smb.conf</span><br></pre></td></tr></table></figure>

<p>将下方代码块中的内容复制到配置文件中。进入vi编辑器后要删除掉所有原来的数据。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[global]</span><br><span class="line">   workgroup = WORKGROUP</span><br><span class="line">   <span class="built_in">log</span> file = /var/log/samba/log.%m</span><br><span class="line">   max <span class="built_in">log</span> size = 1000</span><br><span class="line">   panic action = /usr/share/samba/panic-action %d</span><br><span class="line">   passdb backend = tdbsam</span><br><span class="line">   obey pam restrictions = <span class="built_in">yes</span></span><br><span class="line">   unix password <span class="built_in">sync</span> = <span class="built_in">yes</span></span><br><span class="line">   security = user</span><br><span class="line">   passwd program = /usr/bin/passwd %u</span><br><span class="line">   passwd chat = *Enter\snew\s*\spassword:* %n\n *Retype\snew\s*\spassword:* %n\n *password\supdated\ssuccessfully* .</span><br><span class="line">   pam password change = <span class="built_in">yes</span></span><br><span class="line">   map to guest = bad user</span><br><span class="line">   load printers = no</span><br><span class="line">[samba]</span><br><span class="line">   browseable = <span class="built_in">yes</span></span><br><span class="line">   valid <span class="built_in">users</span> = root</span><br><span class="line">   <span class="comment">#samba共享的目录</span></span><br><span class="line">   path = /udisk</span><br><span class="line">   writable = <span class="built_in">yes</span></span><br><span class="line">   public = no</span><br><span class="line">   guest ok = no</span><br></pre></td></tr></table></figure>


</li>
<li><p>配置samba用户，输入密码</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">smbpasswd -a root</span><br></pre></td></tr></table></figure>


</li>
<li><p>重启samba服务</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">samba restart</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="注意事项与说明"><a href="#注意事项与说明" class="headerlink" title="注意事项与说明"></a>注意事项与说明</h4><ul>
<li>samba用于局域网间共享文件</li>
<li>samba虽然也有端口号，也有协议，但没办法映射外网，是没有办法跨网段的，只能在当前网段中使用。</li>
</ul>
<h3 id="aria2下载器"><a href="#aria2下载器" class="headerlink" title="aria2下载器"></a>aria2下载器</h3><ol>
<li><p>新建下载目录并给权限</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#分配文件夹</span></span><br><span class="line"><span class="built_in">mkdir</span> /udisk/download</span><br><span class="line"></span><br><span class="line"><span class="comment">#授权</span></span><br><span class="line"><span class="built_in">chmod</span> 777 /udisk/download</span><br></pre></td></tr></table></figure>


</li>
<li><p>安装aria2</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apt install aria2 -y</span><br></pre></td></tr></table></figure>


</li>
<li><p>创建aria2配置目录</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /etc/aria2</span><br></pre></td></tr></table></figure>


</li>
<li><p>创建aria2会话文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">touch</span> /etc/aria2/aria2.session</span><br></pre></td></tr></table></figure>


</li>
<li><p>创建aria2配置文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi /etc/aria2/aria2.conf</span><br></pre></td></tr></table></figure>

<p>将下方代码块中的内容复制到vi编辑器中。注意配置信息不可以是别的，或者需要再修改一下，否则可能无法下载</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="comment">#下载地址</span></span><br><span class="line"><span class="attr">dir</span>=/udisk/download</span><br><span class="line"><span class="attr">disk-cache</span>=<span class="number">32</span>M</span><br><span class="line"><span class="attr">continue</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">file-allocation</span>=none</span><br><span class="line"><span class="attr">max-concurrent-downloads</span>=<span class="number">5</span></span><br><span class="line"><span class="attr">max-connection-per-server</span>=<span class="number">5</span></span><br><span class="line"><span class="attr">max-overall-download-limit</span>=<span class="number">0</span></span><br><span class="line"><span class="attr">max-download-limit</span>=<span class="number">0</span></span><br><span class="line"><span class="attr">max-overall-upload-limit</span>=<span class="number">0</span></span><br><span class="line"><span class="attr">max-upload-limit</span>=<span class="number">0</span></span><br><span class="line"><span class="attr">disable-ipv6</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">min-split-size</span>=<span class="number">10</span>M</span><br><span class="line"><span class="attr">split</span>=<span class="number">10</span></span><br><span class="line"><span class="attr">input-file</span>=/etc/aria2/aria2.session</span><br><span class="line"><span class="attr">save-session</span>=/etc/aria2/aria2.session</span><br><span class="line"><span class="attr">save-session-interval</span>=<span class="number">60</span></span><br><span class="line"><span class="attr">enable-rpc</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">rpc-allow-origin-all</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">rpc-listen-all</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">follow-torrent</span>=<span class="literal">true</span></span><br><span class="line"><span class="comment">#peer-id-prefix=-TR2770-</span></span><br><span class="line"><span class="attr">user-agent</span>=Transmission/<span class="number">2.77</span></span><br><span class="line"><span class="attr">bt-seed-unverified</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">bt-save-metadata</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">bt-enable-lpd</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">bt-max-open-files</span>=<span class="number">100</span></span><br><span class="line"><span class="attr">bt-max-peers</span>=<span class="number">60</span></span><br><span class="line"><span class="attr">bt-min-crypto-level</span>=plain</span><br><span class="line"><span class="attr">bt-require-crypto</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">listen-port</span>=<span class="number">65298</span></span><br><span class="line"><span class="attr">dht-listen-port</span>=<span class="number">65298</span></span><br><span class="line"><span class="attr">seed-ratio</span>=<span class="number">1</span></span><br><span class="line"><span class="attr">seed-time</span>=<span class="number">120</span></span><br><span class="line"><span class="attr">rpc-secret</span>=test123</span><br><span class="line"><span class="attr">bt-tracker</span>=udp://tracker.opentrackr.org:<span class="number">1337</span>/announce,udp://<span class="number">9</span>.rarbg.com:<span class="number">2810</span>/announce,udp://tracker.openbittorrent.com:<span class="number">6969</span>/announce,http://tracker.openbittorrent.com:<span class="number">80</span>/announce,https://opentracker.i2p.rocks:<span class="number">443</span>/announce,udp://tracker.torrent.eu.org:<span class="number">451</span>/announce,udp://open.stealth.si:<span class="number">80</span>/announce,udp://exodus.desync.com:<span class="number">6969</span>/announce,udp://tracker2.dler.org:<span class="number">80</span>/announce,udp://tracker.tiny-vps.com:<span class="number">6969</span>/announce,udp://tracker.moeking.me:<span class="number">6969</span>/announce,udp://tracker.dler.org:<span class="number">6969</span>/announce,udp://tracker.<span class="number">0</span>x.tf:<span class="number">6969</span>/announce,udp://open.demonii.com:<span class="number">1337</span>/announce,udp://movies.zsw.ca:<span class="number">6969</span>/announce,udp://fe.dealclub.de:<span class="number">6969</span>/announce,udp://explodie.org:<span class="number">6969</span>/announce,udp://chouchou.top:<span class="number">8080</span>/announce,udp://bt2.archive.org:<span class="number">6969</span>/announce,udp://bt.oiyo.tk:<span class="number">6969</span>/announce</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="注意事项-1"><a href="#注意事项-1" class="headerlink" title="注意事项"></a>注意事项</h4><p>开机自启在之前已经配置过来，这里不需要再配置了。</p>
<p>#####手动启动aria2<br>aria2c -D –conf-path&#x3D;&#x2F;etc&#x2F;aria2&#x2F;aria2.conf &amp;</p>
<h5 id="通过aria2-net调用，或者自建aria2-webui"><a href="#通过aria2-net调用，或者自建aria2-webui" class="headerlink" title="通过aria2.net调用，或者自建aria2 webui"></a>通过aria2.net调用，或者自建aria2 webui</h5><p><a target="_blank" rel="noopener" href="http://aria2.net/">http://aria2.net/</a></p>
<h5 id="使用端口"><a href="#使用端口" class="headerlink" title="使用端口"></a>使用端口</h5><p>6800</p>
<h3 id="lamp环境与filerun-网页云盘"><a href="#lamp环境与filerun-网页云盘" class="headerlink" title="lamp环境与filerun 网页云盘"></a>lamp环境与filerun 网页云盘</h3><p>注意，此教程只适合arrch64架构的设备，而且部分已经过时，需要注意</p>
<ol>
<li><p>安装需要的软件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apt install apache2 php mariadb-server php-mysql php-mbstring php-curl php-gd php-imagick ffmpeg -y</span><br></pre></td></tr></table></figure>


</li>
<li><p>编辑虚拟站点配置</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim /etc/apache2/sites-enabled/000-default.conf</span><br></pre></td></tr></table></figure>

<p>将下方代码块中的内容复制到配置文件中。进入vi编辑器后要删除掉所有原来的数据。</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line">        DocumentRoot /var/www/html</span><br><span class="line">        ErrorLog $&#123;APACHE_LOG_DIR&#125;/error.log</span><br><span class="line">        CustomLog $&#123;APACHE_LOG_DIR&#125;/access.log combined</span><br><span class="line">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure>


</li>
<li><p>修改数据库编码</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi /etc/mysql/mariadb.conf.d/50-server.cnf</span><br></pre></td></tr></table></figure>

<p>在[mysqld]字段的添加或修改如下部分</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="attr">init_connect</span>=<span class="string">&#x27;SET collation_connection = utf8mb4_unicode_ci&#x27;</span></span><br><span class="line"><span class="attr">init_connect</span>=<span class="string">&#x27;SET NAMES utf8mb4&#x27;</span></span><br><span class="line"><span class="attr">character-set-server</span>=utf8mb4</span><br><span class="line"><span class="attr">collation-server</span>=utf8mb4_unicode_ci</span><br><span class="line">skip-character-set-client-handshake</span><br></pre></td></tr></table></figure>



<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi /etc/mysql/mariadb.conf.d/50-client.cnf</span><br></pre></td></tr></table></figure>

<p>在[client]字段的修改如下部分</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="attr">default-character-set</span>=utf8mb4</span><br></pre></td></tr></table></figure>



<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi /etc/mysql/mariadb.conf.d/50-mysql-clients.cnf</span><br></pre></td></tr></table></figure>

<p>在[mysql]字段下修改如下部分</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="attr">default-character-set</span>=utf8mb4</span><br></pre></td></tr></table></figure>


</li>
<li><p>重启数据库并初始化</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#重启数据库</span></span><br><span class="line">systemctl restart mariadb</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置开机自启</span></span><br><span class="line">systemctl <span class="built_in">enable</span> mariadb</span><br><span class="line"></span><br><span class="line"><span class="comment">#初始化</span></span><br><span class="line">mysql_secure_installation</span><br><span class="line"><span class="comment">#会提示输入密码，当前没有密码，直接回车即可</span></span><br><span class="line"><span class="comment">#问是否切换到的时候输入n表示不切换</span></span><br><span class="line"><span class="comment">#询问是否修改密码还是n，不在这里修改</span></span><br><span class="line"><span class="comment">#是否移除匿名用户，输入y。Remove anonymous</span></span><br><span class="line"><span class="comment">#然后接下来的三个询问都输入y，直到退出</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>进入数据库	</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql -uroot -p</span><br><span class="line"><span class="comment">#由于没有密码直接回车就能进入</span></span><br><span class="line"></span><br><span class="line">USE mysql;</span><br><span class="line"></span><br><span class="line"><span class="comment">#这里输入要设置的密码，替换到下方的test123</span></span><br><span class="line">ALTER USER root@localhost IDENTIFIED VIA mysql_native_password USING PASSWORD(<span class="string">&#x27;test123&#x27;</span>);</span><br><span class="line"></span><br><span class="line">FLUSH PRIVILEGES;</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看配置有没有生效，不打也可以</span></span><br><span class="line">show variables like <span class="string">&quot;%character%&quot;</span>;show variables like <span class="string">&quot;%collation%&quot;</span>;</span><br><span class="line"></span><br><span class="line">EXIT;</span><br><span class="line"></span><br><span class="line"><span class="comment">#重启数据库</span></span><br><span class="line">systemctl restart mariadb</span><br></pre></td></tr></table></figure>


</li>
<li><p>配置filerun运行环境：</p>
<p>注意不要cd切目录，保持再root用户登录后的初始目录中。</p>
</li>
<li><p>用pscp传输【loader-wizard.php】，【ioncube_loader_lin_7.4.so】，【00-ioncube.ini】，【FileRun_20220519_PHP73-74.zip】</p>
<p>在putty的目录中输入cmd，调出cmd命令框，然后在其中输入下方的几个命令，将文件传输到棒子</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pscp loader-wizard.php root@192.168.123.131:/root/</span><br><span class="line">pscp ioncube_loader_lin_7.4.so root@192.168.123.131:/root/</span><br><span class="line">pscp 00-ioncube.ini root@192.168.123.131:/root/</span><br><span class="line">pscp FileRun_20220519_PHP73-74.zip root@192.168.123.131:/root/</span><br></pre></td></tr></table></figure>

<p>或者直接用其他方式将这些文件上传到棒子的<code>/root</code>目录下。</p>
</li>
<li><p>将三个文件放到对应的目录下</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mv</span> loader-wizard.php /var/www/html/loader-wizard.php</span><br><span class="line"></span><br><span class="line"><span class="built_in">mv</span> ioncube_loader_lin_7.4.so /usr/lib/php/20210902/ioncube_loader_lin_7.4.so</span><br><span class="line"></span><br><span class="line"><span class="built_in">mv</span> 00-ioncube.ini /etc/php/8.1/apache2/conf.d/00-ioncube.ini</span><br><span class="line"></span><br><span class="line">systemctl restart apache2</span><br></pre></td></tr></table></figure>


</li>
<li><p>访问http:&#x2F;&#x2F;设备的IP&#x2F;loader-wizard.php。如果看到绿色的框内容为：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Loader Installed</span><br><span class="line">The ionCube Loader version 11.0.1 <span class="keyword">for</span> PHP 7.4 is already installed and encoded files should run without problems.</span><br></pre></td></tr></table></figure>

<p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230619143037260.png" alt="image-20230619143037260"></p>
<p>如果是红色的框则证明之前的操作有问题</p>
<p>那么运行环境就配置好了</p>
</li>
<li><p>删掉无用的文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">rm</span> -rf /var/www/html/*</span><br></pre></td></tr></table></figure>


</li>
<li><p>部署filerun文件包</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> 11 &amp;&amp; <span class="built_in">mv</span> FileRun* 11 &amp;&amp; unzip -d 11 11/FileRun* &amp;&amp; <span class="built_in">rm</span> 11/FileRun* &amp;&amp; <span class="built_in">mv</span> 11/* /var/www/html &amp;&amp; <span class="built_in">rm</span> -rf ~/11</span><br><span class="line"></span><br><span class="line"><span class="built_in">mkdir</span> /var/www/html/userfile</span><br></pre></td></tr></table></figure>


</li>
<li><p>设置filerun时区</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;&lt;?php date_default_timezone_set(&quot;Asia/Shanghai&quot;); ?&gt;&#x27;</span> &gt; /var/www/html/customizables/config.php</span><br></pre></td></tr></table></figure>


</li>
<li><p>给权限，设置自启</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">chmod</span> -R 777 /var/www/html/</span><br><span class="line"><span class="built_in">chmod</span> -R 777 /udisk</span><br><span class="line"></span><br><span class="line">systemctl <span class="built_in">enable</span> apache2</span><br></pre></td></tr></table></figure>


</li>
<li><p>访问http:&#x2F;&#x2F;你的IP&#x2F;，开始配置</p>
</li>
</ol>
<h4 id="配置Fire-RUN"><a href="#配置Fire-RUN" class="headerlink" title="配置Fire RUN"></a>配置Fire RUN</h4><p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230619143400943.png" alt="image-20230619143400943"></p>
<p>next下一步</p>
<p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230619143426603.png" alt="image-20230619143426603"></p>
<p>再next。应该都是绿色的OK字样。</p>
<p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230619143748025.png" alt="image-20230619143748025"></p>
<p>输入完对应信息，next。</p>
<p>然后就会给一个初始用户。</p>
<p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230619143853640.png" alt="image-20230619143853640"></p>
<p>使用初始用户登录进去</p>
<p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230619143933926.png" alt="image-20230619143933926"></p>
<p>进入之后点击左侧下面的<code>Control panel</code>。</p>
<p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230619144029671.png" alt="image-20230619144029671"></p>
<p>修改密码</p>
<p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230619144101984.png" alt="image-20230619144101984"></p>
<p>输入主目录</p>
<p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230619144315521.png" alt="image-20230619144315521"></p>
<p>汉化</p>
<p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230619144408545.png" alt="image-20230619144408545"></p>
<p>退出再登录，就能看到中文的选项了</p>
<p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230619144445412.png" alt="image-20230619144445412"></p>
<p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230619144503674.png" alt="image-20230619144503674"></p>
<p>此时汉化完成</p>
<p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230619144532016.png" alt="image-20230619144532016"></p>
<p>其他配置</p>
<p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230619145748149.png" alt="image-20230619145748149"></p>
<p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230619145849512.png" alt="image-20230619145849512"></p>
<p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230619145949529.png" alt="image-20230619145949529"></p>
<h4 id="注意事项-2"><a href="#注意事项-2" class="headerlink" title="注意事项"></a>注意事项</h4><p>可以使用FRP或者端口映射的形式进行外网访问。</p>
<p>默认端口80，可以修改</p>
<h3 id="miniDLNA"><a href="#miniDLNA" class="headerlink" title="miniDLNA"></a>miniDLNA</h3><ol>
<li><p>安装软件包</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apt install minidlna -y</span><br></pre></td></tr></table></figure>


</li>
<li><p>修改配置文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;media_dir=/udisk&#x27;</span> &gt; /etc/minidlna.conf</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;port=8200&#x27;</span> &gt;&gt; /etc/minidlna.conf</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;friendly_name=WiFi-410&#x27;</span> &gt;&gt; /etc/minidlna.conf </span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;inotify=yes&#x27;</span> &gt;&gt; /etc/minidlna.conf</span><br></pre></td></tr></table></figure>


</li>
<li><p>禁用自启</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl <span class="built_in">disable</span> minidlna</span><br></pre></td></tr></table></figure>

<p>后期会在脚本中启动，防止磁盘挂载失败导致认不到视频文件</p>
</li>
<li><p>启动minidlna</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl start minidlna</span><br></pre></td></tr></table></figure>

</li>
<li><p>如果dlna认不到新加入的视频，重启一下系统，拔掉棒子再插上就行了</p>
</li>
</ol>
<h3 id="移动硬盘优化"><a href="#移动硬盘优化" class="headerlink" title="移动硬盘优化"></a>移动硬盘优化</h3><p>防止移动硬盘休眠</p>
<p>crontab -e<br>*&#x2F;3 * * * * echo “1” &gt; &#x2F;udisk&#x2F;download&#x2F;.no-hiberfil</p>
<h1 id="救砖（刷回原始包）"><a href="#救砖（刷回原始包）" class="headerlink" title="救砖（刷回原始包）"></a>救砖（刷回原始包）</h1><h2 id="Miko"><a href="#Miko" class="headerlink" title="Miko"></a>Miko</h2><p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618203939677.png" alt="image-20230618203939677"></p>
<h1 id="Debian项目WIKI"><a href="#Debian项目WIKI" class="headerlink" title="Debian项目WIKI"></a>Debian项目WIKI</h1><p><a target="_blank" rel="noopener" href="https://www.kancloud.cn/handsomehacker/openstick/2636505">https://www.kancloud.cn/handsomehacker/openstick/2636505</a></p>
<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><h3 id="关于-OpenStick"><a href="#关于-OpenStick" class="headerlink" title="关于 OpenStick"></a>关于 OpenStick</h3><p>针对于msm8916芯片的4G网卡的逆向工程和Mainline Linux移植。<br>旨在实现一个廉价的带4G功能的ARM64单板电脑（性能其实和树莓派zero2、树莓派3b差不多）。<br>提供完全可用的Debian发行版镜像和刷机方法。<br>另外还会提供emcp扩容等高级玩法。<br>支持电路板丝印为UFI001B、UFI001C、SP970、UZ801开头的4G无线网卡。<br>本项目仅用于学习交流之用，请勿用于商业用途，本刷机包完全免费开源，欢迎举报倒卖的行为。</p>
<p><strong>本教程的所有内容仅供参考，本人及文章作者不对任何刷机和改造设备的行为负责。也没有任何义务处理砖机。</strong></p>
<h3 id="设备具体配置"><a href="#设备具体配置" class="headerlink" title="设备具体配置"></a>设备具体配置</h3><p>虽然都在网上能查到，但是放在这里还是方便一点。</p>
<ul>
<li>msm8916 主控 Cortex-A53 * 4 on 0.9GHZ</li>
<li>512MB内存+4GB储存的拆机二手emcp</li>
<li>WCN3620 &amp; WCN3680b</li>
<li>pm8916 PMIC</li>
</ul>
<h3 id="各外设对应GPIO"><a href="#各外设对应GPIO" class="headerlink" title="各外设对应GPIO"></a>各外设对应GPIO</h3><table>
<thead>
<tr>
<th align="left">型号</th>
<th align="left">red led</th>
<th align="left">green led</th>
<th align="left">blue led</th>
<th align="left">按键</th>
</tr>
</thead>
<tbody><tr>
<td align="left">ufi001b&#x2F;c</td>
<td align="left">gpio22</td>
<td align="left">gpio21</td>
<td align="left">gpio20</td>
<td align="left">gpio37</td>
</tr>
<tr>
<td align="left">sp970</td>
<td align="left">gpio9</td>
<td align="left">gpio10</td>
<td align="left">gpio28</td>
<td align="left">gpio107</td>
</tr>
<tr>
<td align="left">uz801</td>
<td align="left">gpio7</td>
<td align="left">gpio8</td>
<td align="left">gpio6</td>
<td align="left">gpio23</td>
</tr>
<tr>
<td align="left">UFI-16-V3</td>
<td align="left">gpio8</td>
<td align="left">(pmic) gpio4</td>
<td align="left">gpio32</td>
<td align="left">gpio49</td>
</tr>
</tbody></table>
<hr>
<h3 id="设备支持情况"><a href="#设备支持情况" class="headerlink" title="设备支持情况"></a>设备支持情况</h3><p>这意味着主线内核(5.15 和 5.10)的对于设备的驱动程度</p>
<table>
<thead>
<tr>
<th align="left">功能</th>
<th align="left">支持状况</th>
</tr>
</thead>
<tbody><tr>
<td align="left">arm64</td>
<td align="left">支持</td>
</tr>
<tr>
<td align="left">KVM 虚拟化</td>
<td align="left">支持</td>
</tr>
<tr>
<td align="left">PSCI</td>
<td align="left">支持（v1.0）</td>
</tr>
<tr>
<td align="left">自适应emcp空间</td>
<td align="left">支持</td>
</tr>
<tr>
<td align="left">WIFI (WCN3620)</td>
<td align="left">支持</td>
</tr>
<tr>
<td align="left">WIFI (WCN3680b)</td>
<td align="left">支持</td>
</tr>
<tr>
<td align="left">蓝牙</td>
<td align="left">支持</td>
</tr>
<tr>
<td align="left">4G 流量</td>
<td align="left">支持</td>
</tr>
<tr>
<td align="left">短信</td>
<td align="left">支持</td>
</tr>
<tr>
<td align="left">USB HOST</td>
<td align="left">支持</td>
</tr>
<tr>
<td align="left">USB DEVICE</td>
<td align="left">支持</td>
</tr>
<tr>
<td align="left">Venus 视频解码器</td>
<td align="left">支持</td>
</tr>
<tr>
<td align="left">Venus 视频编码器</td>
<td align="left">不支持</td>
</tr>
<tr>
<td align="left">GPS</td>
<td align="left">未验证</td>
</tr>
<tr>
<td align="left">通话</td>
<td align="left">未验证</td>
</tr>
</tbody></table>
<ul>
<li>注 : SP970与UZ801由于sim切卡gpio尚不明确，<strong>暂不支持</strong>与<strong>modem</strong>有关的功能（modem固件是正确的，如果你的机器是硬改实现切卡的可能modem能使用，<strong>未测试</strong>）。</li>
<li>SP970 V3 机型可能与SP970 V10的wifi芯片不太一样，<strong>刷入可能会导致wifi不稳定</strong>等问题。</li>
<li>UZ801在安卓下切卡后可能再刷机能使用modem，具体原因未知。</li>
<li>不同批次的相同版型可能存在cpu后缀的差异，使用不了modem的朋友短期内的解决方案只有自行提取modem firmware，未来可以通过独立modem固件分区的方法来实现兼容不同后缀的soc(感谢酷安 @fanxueke)。</li>
<li>HandsomeMod与Debian固件中使用的modem firmware信息如下所示，缺失的机型会在短时间内补充。</li>
</ul>
<table>
<thead>
<tr>
<th align="left">板型</th>
<th align="left">SOC后缀</th>
</tr>
</thead>
<tbody><tr>
<td align="left">UFI001B</td>
<td align="left">0VV</td>
</tr>
<tr>
<td align="left">UFI001C</td>
<td align="left">0VV</td>
</tr>
<tr>
<td align="left">UFIW001</td>
<td align="left">0VV</td>
</tr>
</tbody></table>
<h3 id="投稿与奉献"><a href="#投稿与奉献" class="headerlink" title="投稿与奉献"></a>投稿与奉献</h3><p>欢迎各位大佬将自己的玩法或建议以<strong>markdown格式</strong><br>发到邮箱**<a href="mailto:&#104;&#x61;&#110;&#100;&#x73;&#x6f;&#x6d;&#x65;&#121;&#105;&#110;&#x67;&#x79;&#97;&#110;&#64;&#x67;&#x6d;&#97;&#105;&#x6c;&#x2e;&#x63;&#111;&#109;">handsomeyingyan@gmail.com</a>**,或者私信（酷安、CSDN @handsomehacker）<br>我们会尽快校对和更新文档，让更多的人看到：p</p>
<h3 id="奉献者"><a href="#奉献者" class="headerlink" title="奉献者"></a>奉献者</h3><p>感谢所有为项目发展而奉献的朋友，排名不分先后。</p>
<ul>
<li>HandsomeHacker</li>
<li>fanxueke （酷安 @fanxueke ）</li>
<li>魂梦九霄 （酷安 @魂梦九霄 ）</li>
<li>l305197437 (酷安 @l305197437 )</li>
<li>lilyok123 (酷安 @lilyok123 )</li>
<li>Zy143L (酷安 @Zy143L)</li>
</ul>
<h3 id="项目相关链接"><a href="#项目相关链接" class="headerlink" title="项目相关链接"></a>项目相关链接</h3><p>维护项目不易，欢迎star与关注！！<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/github_38345754">HandsomeHacker的CSDN博客</a><br><a target="_blank" rel="noopener" href="https://github.com/OpenStick">OpenStick 项目主页(github)</a><br><a target="_blank" rel="noopener" href="https://github.com/HandsomeMod">HandsomeMod 项目主页</a></p>
<h3 id="赞助"><a href="#赞助" class="headerlink" title="赞助"></a>赞助</h3><p>如果你觉得本项目对你有帮助，欢迎赞助，帮助我们的项目发展的更好！</p>
<h2 id="开始折腾"><a href="#开始折腾" class="headerlink" title="开始折腾"></a>开始折腾</h2><p>首先你需要在<a target="_blank" rel="noopener" href="https://github.com/OpenStick/OpenStick">Openstick项目</a>的release中得到最新的Debian或HandsomeMod(可能会鸽)刷机包。然后准备好fastboot与adb工具,windows版本会在release中提供，linux直接使用包管理器中提供的版本即可。</p>
<h3 id="Linux-下的刷机"><a href="#Linux-下的刷机" class="headerlink" title="Linux 下的刷机"></a>Linux 下的刷机</h3><ul>
<li>不同的Linux发行版可能存在差异，这里以2022年2月8日的ArchLinux为例。</li>
<li>如果你的设备之前刷过base.zip，则可以将设备置于fastboot模式后从第4步开始。</li>
<li>ufi001b&#x2F;c之外的版型请使用更为通用的base-generic.zip，然后使用本机型的boot.img替换debian.zip中的boot.img</li>
</ul>
<ol>
<li>解压base.zip压缩包。</li>
<li>将你的设备置于fastboot模式</li>
<li><a target="_blank" rel="noopener" href="http://执行其中的flash.sh/">执行其中的flash.sh</a></li>
<li>当完成后解压&lt;系统名称&gt;.zip压缩包。</li>
<li><a target="_blank" rel="noopener" href="http://执行其中的flash.sh/">执行其中的flash.sh</a></li>
<li>enjoy!</li>
</ol>
<h3 id="Windows-下的刷机"><a href="#Windows-下的刷机" class="headerlink" title="Windows 下的刷机"></a>Windows 下的刷机</h3><ul>
<li>作者的windows环境变量里有adb和fastboot，可能需要根据实际情况对脚本进行适当调整。</li>
<li>如果你的设备之前刷过base.zip，则可以将设备置于fastboot模式后从第4步开始。</li>
<li>ufi001b&#x2F;c之外的版型请使用更为通用的base-generic.zip，然后使用本机型的boot.img替换debian.zip中的boot.img</li>
</ul>
<ol>
<li>解压base.zip压缩包。</li>
<li>将你的设备置于fastboot模式</li>
<li>执行其中的flash.bat</li>
<li>当完成后解压&lt;系统名称&gt;.zip压缩包。</li>
<li>执行其中的flash.bat</li>
<li>enjoy!</li>
</ol>
<h3 id="Windows-下的常见驱动问题"><a href="#Windows-下的常见驱动问题" class="headerlink" title="Windows 下的常见驱动问题"></a>Windows 下的常见驱动问题</h3><ul>
<li>[注] 部分翻译自postmarketOS wiki - <a target="_blank" rel="noopener" href="https://wiki.postmarketos.org/wiki/Windows_FAQ">Windows FAQ</a></li>
</ul>
<h4 id="如果你的设备被识别为adb-设备"><a href="#如果你的设备被识别为adb-设备" class="headerlink" title="如果你的设备被识别为adb 设备"></a>如果你的设备被识别为adb 设备</h4><p>如果在启动OpenStick后，只有adb可以连接而rndis在设备管理器中没有出现，则可以将这个设备的驱动更新为<strong>Composite USB Device</strong> 即可,(Windows 7 下为“<strong>Android Composite USB Device</strong>”)。</p>
<h4 id="安装RNDIS驱动"><a href="#安装RNDIS驱动" class="headerlink" title="安装RNDIS驱动"></a>安装RNDIS驱动</h4><ul>
<li>Windows 10 下的驱动位置<ul>
<li><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618220511663.png" alt="image-20230618220511663"></li>
<li><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618220520947.png" alt="image-20230618220520947"></li>
</ul>
</li>
<li>Windows 7 下的驱动位置 （感谢酷安 @l305197437）<ul>
<li><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618220540336.png" alt="image-20230618220540336"></li>
<li><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618220550488.png" alt="image-20230618220550488"></li>
</ul>
</li>
</ul>
<h2 id="基础使用"><a href="#基础使用" class="headerlink" title="基础使用"></a>基础使用</h2><p>这里记录一些基础使用的教程，仅供参考</p>
<h3 id="Debian基础使用"><a href="#Debian基础使用" class="headerlink" title="Debian基础使用"></a>Debian基础使用</h3><h4 id="基本信息"><a href="#基本信息" class="headerlink" title="基本信息"></a>基本信息</h4><ul>
<li>Debian 11 bulleye 稳定版</li>
<li>Linux Kernel 5.15 LTS</li>
<li>装了一些bookworm的包（modemman ager）和mobian的fork，暂时不知道会给后续更新带来什么影响。</li>
<li>开机默认启动rndis与adbd，可以通过adb与ssh连接（ip地址为192.168.68.1）</li>
<li>默认配置了modem连接，插卡即有网。</li>
<li>默认hostname为openstick</li>
<li>默认用户名 user 密码 1</li>
<li>内核支持挂无线网卡和uvc摄像头，docker与anbox。</li>
</ul>
<h4 id="连接到OpenStick"><a href="#连接到OpenStick" class="headerlink" title="连接到OpenStick"></a>连接到OpenStick</h4><p>支持使用任何支持openssh协议的工具以及adb来连接到OpenStick的shell。</p>
<ul>
<li>在windows下很多带颜色的字符会在adb下显示不出来，建议使用ssh进行连接。</li>
<li>adb fork自安卓4.4 不支持adb install 等涉及安卓图形界面或软件管理的指令。</li>
</ul>
<h5 id="使用adb"><a href="#使用adb" class="headerlink" title="使用adb"></a>使用adb</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 进入bash</span><br><span class="line">$ adb shell</span><br><span class="line"># 也可以通过reboot bootloader进入到fastboot模式</span><br><span class="line">$ adb reboot bootloader</span><br></pre></td></tr></table></figure>

<h5 id="使用ssh"><a href="#使用ssh" class="headerlink" title="使用ssh"></a>使用ssh</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ ssh user@192.168.68.1</span><br></pre></td></tr></table></figure>

<h4 id="开启wifi热点-不依赖网桥的方法"><a href="#开启wifi热点-不依赖网桥的方法" class="headerlink" title="开启wifi热点 (不依赖网桥的方法)"></a>开启wifi热点 (不依赖网桥的方法)</h4><ul>
<li>Debian 使用NetworkManager进行网络连接管理，这里使用nmtui进行设置。</li>
<li>该方法不能同时使用rndis与wifi热点，如需要同时使用可以参考<a target="_blank" rel="noopener" href="https://www.kancloud.cn/handsomehacker/openstick/2684880">rndis与wifi热点共存(debian)</a></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo nmtui</span><br></pre></td></tr></table></figure>

<h5 id="之后的界面如下所示："><a href="#之后的界面如下所示：" class="headerlink" title="之后的界面如下所示："></a>之后的界面如下所示：</h5><p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618220826566.png" alt="image-20230618220826566"></p>
<h5 id="创建一个连接"><a href="#创建一个连接" class="headerlink" title="创建一个连接"></a>创建一个连接</h5><p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618220841279.png" alt="image-20230618220841279"></p>
<p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618220857245.png" alt="image-20230618220857245"></p>
<h5 id="创建wifi类型的连接"><a href="#创建wifi类型的连接" class="headerlink" title="创建wifi类型的连接"></a>创建wifi类型的连接</h5><p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618220926938.png" alt="image-20230618220926938"></p>
<h5 id="device输入wlan0，其他选项按照你的需求自行填写"><a href="#device输入wlan0，其他选项按照你的需求自行填写" class="headerlink" title="device输入wlan0，其他选项按照你的需求自行填写"></a>device输入wlan0，其他选项按照你的需求自行填写</h5><p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618220941340.png" alt="image-20230618220941340"></p>
<h5 id="设置ip地址-注意ip类型必须为shared，ip地址必须为192-168-68-1"><a href="#设置ip地址-注意ip类型必须为shared，ip地址必须为192-168-68-1" class="headerlink" title="设置ip地址,注意ip类型必须为shared，ip地址必须为192.168.68.1"></a>设置ip地址,注意ip类型必须为shared，ip地址必须为192.168.68.1</h5><p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618220949846.png" alt="image-20230618220949846"></p>
<h5 id="输入以下指令激活这个连接，激活后usb-rndis功能会失效。"><a href="#输入以下指令激活这个连接，激活后usb-rndis功能会失效。" class="headerlink" title="输入以下指令激活这个连接，激活后usb rndis功能会失效。"></a>输入以下指令激活这个连接，激活后usb rndis功能会失效。</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo nmcli con up test</span><br></pre></td></tr></table></figure>

<h5 id="要再次使用usb-rndis，可以down掉这个连接"><a href="#要再次使用usb-rndis，可以down掉这个连接" class="headerlink" title="要再次使用usb rndis，可以down掉这个连接"></a>要再次使用usb rndis，可以down掉这个连接</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo nmcli con down test</span><br></pre></td></tr></table></figure>

<h4 id="常见问题-1"><a href="#常见问题-1" class="headerlink" title="常见问题"></a>常见问题</h4><h5 id="UFI001C-SP970-UZ801-刷入debian-zip后工作不正常"><a href="#UFI001C-SP970-UZ801-刷入debian-zip后工作不正常" class="headerlink" title="UFI001C&#x2F;SP970&#x2F;UZ801 刷入debian.zip后工作不正常"></a>UFI001C&#x2F;SP970&#x2F;UZ801 刷入debian.zip后工作不正常</h5><p>debian.zip仅适用于ufi001b，若需要支持其他版型需要同时更新设备树与固件。<br>在github的release中下载boot-&lt;机型&gt;.img与firmware-&lt;机型&gt;.zip两个文件后，解压firmware.zip后,插入OpenStick，在你的电脑上键入以下指令。（uz801仅需更新boot.img)</p>
<ul>
<li>注：windows下的替换建议配合scp使用，windows下adb不支持通配符“ * ”</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> # 假设cmd&amp;terminal的当前目录在firmware的解压文件夹下</span><br><span class="line">$ adb push ./* /lib/firmware</span><br><span class="line">$ adb reboot bootloader</span><br><span class="line">$ fastboot flash boot boot-&lt;机型&gt;.img</span><br><span class="line">$ fastboot reboot</span><br></pre></td></tr></table></figure>

<h5 id="初次开机执行apt时报错"><a href="#初次开机执行apt时报错" class="headerlink" title="初次开机执行apt时报错"></a>初次开机执行apt时报错</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> E: Release file for http://mirrors.163.com/debian/dists/bullseye/InRelease is not valid yet (invalid for another 157d 16h 4</span><br><span class="line">9min 2s). Updates for this repository will not be applied.</span><br><span class="line">E: Release file for http://security.debian.org/dists/bullseye-security/InRelease is not valid yet (invalid for another 209d</span><br><span class="line"> 4h 12min 32s). Updates for this repository will not be applied.</span><br><span class="line">E: Release file for http://repo.mobian-project.org/dists/bullseye/InRelease is not valid yet (invalid for another 23d 19h 5</span><br><span class="line">3min 31s). Updates for this repository will not be applied.</span><br></pre></td></tr></table></figure>

<p>这是ntp服务没有及时同步时间所导致的，重启即可。</p>
<h5 id="adb环境下用不了nmtui等带图形的应用"><a href="#adb环境下用不了nmtui等带图形的应用" class="headerlink" title="adb环境下用不了nmtui等带图形的应用"></a>adb环境下用不了nmtui等带图形的应用</h5><p>例如执行nmtui时出现以下错误</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">root@openstick:/# nmtui     </span><br><span class="line">TERM environment variable needs set.</span><br></pre></td></tr></table></figure>

<p>设置TERM环境变量即可</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ export TERM=linux</span><br></pre></td></tr></table></figure>

<h5 id="root用户使用ssh登录不了"><a href="#root用户使用ssh登录不了" class="headerlink" title="root用户使用ssh登录不了"></a>root用户使用ssh登录不了</h5><ul>
<li>感谢酷友@fanxueke的投稿。</li>
<li>不要尝试在你有内网穿透或是在公网有ip的设备上使用root登录，这将会造成很大的安全隐患。</li>
<li>root的默认密码与user一致（都是1），可以通过<code>passwd root</code>修改</li>
</ul>
<h6 id="安装nano编辑器（需插入SIM卡或连接wifi）"><a href="#安装nano编辑器（需插入SIM卡或连接wifi）" class="headerlink" title="安装nano编辑器（需插入SIM卡或连接wifi）"></a>安装nano编辑器（需插入SIM卡或连接wifi）</h6><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt-get update`</span><br><span class="line">`sudo apt-get install nano</span><br></pre></td></tr></table></figure>

<h6 id="编辑sshd-config"><a href="#编辑sshd-config" class="headerlink" title="编辑sshd_config"></a>编辑sshd_config</h6><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo nano /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure>

<p>将34行<code>#PermitRootLogin prohibit-password</code>改为<code>PermitRootLogin yes</code><br>将58行<code>#PasswordAuthentication yes</code>的<code>#</code>去掉</p>
<h4 id="重启OpenStick"><a href="#重启OpenStick" class="headerlink" title="重启OpenStick"></a>重启OpenStick</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo reboot</span><br></pre></td></tr></table></figure>







<h3 id="rndis与wifi热点共存-debian"><a href="#rndis与wifi热点共存-debian" class="headerlink" title="rndis与wifi热点共存(debian)"></a>rndis与wifi热点共存(debian)</h3><p>解决debian rndis与wifi热点共存的问题</p>
<ul>
<li>感谢 lilyok123 (酷安 @lilyok123) 的投稿</li>
<li>原理：创建一个网桥，配置ip地址，并且将usb网卡与无线网卡设备加入到网桥中即可</li>
<li>注意事项：建议操作前将wifi连接到路由器上，操作时先将usb网络加入到网桥中，确保电脑能够正常 连接后，再将无线网卡加入到网桥中，万一操作失误还能从其它的网卡登录设备。否则估计得重新刷机了。</li>
</ul>
<h4 id="具体步骤"><a href="#具体步骤" class="headerlink" title="具体步骤"></a>具体步骤</h4><p>第一步，输入命令nmtui，创建一个网桥</p>
<p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618221336262.png" alt="image-20230618221336262"></p>
<p>第二步,配置ip地址为192.168.68.1&#x2F;24（大佬默认是这个地址，如果更改网段需要修改dnsmsq.conf文件），配置名随意，设备名随意，这里都写br0</p>
<p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618221355326.png" alt="image-20230618221355326"></p>
<p>第三步，为网桥添加一个ETHERNET设备</p>
<p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618221408744.png" alt="image-20230618221408744"></p>
<p>第四步，ethernet设备需要填写为usb0（ifconfig命令看到的网卡名），配置名随意，这里起个名也是usb0</p>
<p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618221426543.png" alt="image-20230618221426543"></p>
<p>第五步，此时usb0的设备添加成功，保存退出</p>
<p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618221441944.png" alt="image-20230618221441944"></p>
<p>第六步，此时usb0配置文件如果没有生效，需要nmcli connection手动激活下，如无意外此时电脑能够正常访问随身wifi了。如果不成功通过另外的无线网卡登录看看配置是不是正确。</p>
<p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618221449911.png" alt="image-20230618221449911"></p>
<p>第七步，在第六步usb0的网桥确保正常后，可以为网桥添加无线网卡了，输入nmtui命令，选择刚刚的br0配置文件，选择edit编辑。</p>
<p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618221506699.png" alt="image-20230618221506699"></p>
<p>第八步，选择添加WLAN无线设备</p>
<p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618221517766.png" alt="image-20230618221517766"></p>
<p>第九步，配置热点的名称，密码等参数，配置文件随意，device需要添加ifconfig中的无线网卡名称。</p>
<p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618221531711.png" alt="image-20230618221531711"></p>
<p>第十步，保存配置，返回</p>
<p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618221540285.png" alt="image-20230618221540285"></p>
<p>最后一步，此时wlan0的配置文件没有生效，需要手动nncli connection切换下。</p>
<p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618221551107.png" alt="image-20230618221551107"></p>
<h3 id="控制led行为"><a href="#控制led行为" class="headerlink" title="控制led行为"></a>控制led行为</h3><p>OpenStick 存在三个led灯，默认blue表示wifi连接状态，red表示系统是否还处于正常运行状态。</p>
<p>可以通过 <strong>echo &lt;行为&gt; &gt; &#x2F;sys&#x2F;class&#x2F;led&#x2F;&lt;名字&gt;&#x2F;trigger</strong> 来修改led行为。<br>可用的行为如下</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">root@openstick:/sys/class/leds/green:internet# <span class="built_in">cat</span> trigger </span><br><span class="line">[none] usb-gadget usb-host rfkill-any rfkill-none kbd-scrolllock kbd-numlock kbd-capslock kbd-kanalock kbd-shiftlock kbd-altgrlock kbd-ctrllock kbd-altlock kbd-shiftllock kbd-shiftrlock kbd-ctrlllock kbd-ctrlrlock timer heartbeat cpu cpu0 cpu1 cpu2 cpu3 default-on panic mmc0 bluetooth-power hci0-power rfkill0 phy0rx phy0tx phy0assoc phy0radio rfkill1</span><br></pre></td></tr></table></figure>

<p>例如把green led的行为定义为usb device模式的活动状态</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">root@openstick:/sys/class/leds/green:internet# echo usb-gadget &gt; trigger</span><br></pre></td></tr></table></figure>

<p>写入该字符串后led行为立刻生效，重启失效</p>
<h3 id="控制usb行为"><a href="#控制usb行为" class="headerlink" title="控制usb行为"></a>控制usb行为</h3><p>OpenStick 提供的所有系统都使用基于libusbgx的Gadget Controller (以下简称gc)来管理usb在device模式下的行为。</p>
<p>Debian默认通过&#x2F;usr&#x2F;sbin&#x2F;mobian-usb-network-config脚本启动rndis和adb两种usb复合设备，这也就意味着如果你的设备安装的是Debian，插入电脑默认会出现两个设备。</p>
<p>HandsomeMod 通过uci来调用gc，用户可以通过luci来控制gc。</p>
<p>在Debian中，rndis建立的usb0网络通过networkmanager进行管理，dnsmasq作为dhcp server分配ip地址。</p>
<p>你也可以通过以下指令（例子）来加入更多的功能（同时运行不同功能的种类是有限的，受限于硬件）。</p>
<p><strong>注意：在windows下rndis必须为第一个加入gadget中的功能，且windows不支持动态更新gadget，只能在脚本中一次添加完所有的gadget。</strong></p>
<p>以下指令需要root权限,重启后失效。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 列出当前usb活动的device</span><br><span class="line">gc -l</span><br><span class="line"># 加入一个串口设备</span><br><span class="line"># 有效的关键字为 serial ffs hid midi printer uvc mass rndis ecm acm</span><br><span class="line">gc -a serial</span><br><span class="line"># 删除指定串口设备 （X 为列表中的对应的config名称）</span><br><span class="line">gc -r serial.X</span><br><span class="line"># 清除所有的gadget</span><br><span class="line">gc -c</span><br><span class="line"># 关闭gadget</span><br><span class="line">gc -d</span><br><span class="line"># 开启gadget</span><br><span class="line">gc -e</span><br></pre></td></tr></table></figure>

<h4 id="切换USB工作模式"><a href="#切换USB工作模式" class="headerlink" title="切换USB工作模式"></a>切换USB工作模式</h4><p>OpenStick没有usb-id脚，只能手动将usb切换为主模式来插入u盘等设备，你可以将以下语句加入 <strong>&#x2F;usr&#x2F;sbin&#x2F;mobian-usb-gadget</strong> setup()的最开头来实现开机切换，所有usb device功能将会失效。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">echo host &gt; /sys/kernel/debug/usb/ci_hdrc.0/role</span><br></pre></td></tr></table></figure>

<p>当然也可以通过把usb-typea头改为mircousb头，然后把vol up(fb)触点的gpio接到usb-id实现自动切换(需修改设备树)。</p>
<h4 id="关于-Gadget-Controller"><a href="#关于-Gadget-Controller" class="headerlink" title="关于 Gadget Controller"></a>关于 Gadget Controller</h4><p>Gadget Controller 的开发时间有点短，可能不够成熟。。。<br>欢迎star、提出issue和pull request来帮助我完善它~</p>
<h3 id="lk-bootloader基本使用"><a href="#lk-bootloader基本使用" class="headerlink" title="lk bootloader基本使用"></a>lk bootloader基本使用</h3><p>这里只记录和平常的lk不大一样的地方</p>
<h4 id="获取日志"><a href="#获取日志" class="headerlink" title="获取日志"></a>获取日志</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">fastboot oem lk_log</span><br><span class="line">fastboot get_staged /dev/stdout</span><br></pre></td></tr></table></figure>

<h4 id="提取分区内容"><a href="#提取分区内容" class="headerlink" title="提取分区内容"></a>提取分区内容</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">fastboot oem dump &lt;分区名&gt;</span><br><span class="line">fastboot get_staged &lt;文件名&gt;</span><br></pre></td></tr></table></figure>

<h4 id="进入edl模式"><a href="#进入edl模式" class="headerlink" title="进入edl模式"></a>进入edl模式</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">fastboot oem reboot-edl</span><br></pre></td></tr></table></figure>



<h3 id="emali短信转发"><a href="#emali短信转发" class="headerlink" title="emali短信转发"></a>emali短信转发</h3><p>转载至酷安@魂梦九霄<br>调用modemmanager的get-sms指令，可以将收到的短信转发到指定邮箱<br><a target="_blank" rel="noopener" href="https://gitee.com/jiu-xiao/ufi-message">gitee源码</a></p>
<h2 id="使用转发前请补全smtp-py开头的smtp信息"><a href="#使用转发前请补全smtp-py开头的smtp信息" class="headerlink" title="使用转发前请补全smtp.py开头的smtp信息"></a>使用转发前请补全smtp.py开头的smtp信息</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">python3 msg.py add 861234567890 text</span><br></pre></td></tr></table></figure>

<p>添加发送到1234567890的内容为text的短信到暂存区</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">python3 msg.py send</span><br></pre></td></tr></table></figure>

<p>将所有暂存区的短信发送</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">python3 msg.py clean</span><br></pre></td></tr></table></figure>

<p>清除本地所有短信（暂存，已发送，接收）</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">python3 msg.py forward</span><br></pre></td></tr></table></figure>

<p>将所有接收到的短信通过smtp邮件转发</p>
<h2 id="高级玩法"><a href="#高级玩法" class="headerlink" title="高级玩法"></a>高级玩法</h2><p>这里记录一些高级玩法，仅供参考。</p>
<h3 id="emcp扩容"><a href="#emcp扩容" class="headerlink" title="emcp扩容"></a>emcp扩容</h3><p>这里只记录在linux下的扩容过程，windows应该类似，使用9008模式下的备份工具备份整个emcp上的内容即可（包含分区表）。高通的9008模式恢复时会将userdata分区自动扩充到所有可用的空间，所以理论上来说安卓系统也适合该方法备份（据部分用户反映安卓系统在扩容后的机器中无法使用）。</p>
<ul>
<li>注意：方法仅供参考，不代表百分之百在你的环境中可用。</li>
</ul>
<h4 id="硬件"><a href="#硬件" class="headerlink" title="硬件"></a>硬件</h4><p>按照原机搭配的emcp，可以确定emcp必须满足以下条件。</p>
<ul>
<li>内置的内存必须是<strong>lpddr2</strong> （不敢确定 我的机器大部分搭配的是lpddr2 msm8916支持lpddr3但可能需要不同的电压来驱动，即使电压一样也许需要使用不同的loader来初始化内存）</li>
<li>bga封装必须是<strong>bga162</strong></li>
<li>符合规格的芯片会在焊接到位后上电进入9008(edl)模式，其他情况则会没有任何反应。</li>
</ul>
<p>经过测试以下的芯片可以兼容UFI001B&#x2F;C机型</p>
<ul>
<li>08emcp08-nl2cv100 (bga162 lpddr2 1g + 8g emmc)</li>
<li>kmk8x000vm-b412 (bga162 lpddr2 1g + 16g emmc)</li>
</ul>
<h4 id="软件"><a href="#软件" class="headerlink" title="软件"></a>软件</h4><p>推荐使用linux下的edl工具,安装之前默认你的环境中有python3及yay。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yay -S edl-git</span><br></pre></td></tr></table></figure>

<ul>
<li>不是Arch-based的发行版建议直接按照<a target="_blank" rel="noopener" href="https://github.com/bkerler/edl">edl官方</a>的方法安装。</li>
</ul>
<p>之后长按机器上电，进入9008模式，输入以下指令备份emcp中的内容。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">edl rl dumps --skip=userdata --genxml</span><br></pre></td></tr></table></figure>

<ul>
<li>如果长时间卡住，建议ctrl+c以后重试。</li>
<li>如果你的edl报例如no suitable loader found一类的错误，则可以尝试其他的loader初始化内存，edl提供了很多loader这里以红米2的loader为例(loader路径 不同的linux环境可能会有差异，仅供参考)。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ edl rl dumps --skip=userdata --genxml  \</span><br><span class="line">--loader /usr/lib/python3.10/site-packages/edlclient-3.53-py3.10.egg/edlclient/../Loaders/xiaomi/007050e100000000_50838757eab7c632_fhprg_peek_wt88047.bin</span><br></pre></td></tr></table></figure>

<p>换上新的emcp后，会出现9008设备，此时在备份文件夹里输入以下指令</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ edl qfil rawprogram0.xml patch0.xml</span><br></pre></td></tr></table></figure>

<ul>
<li>如果出错，同上，加入loader参数即可。</li>
</ul>
<p>重启机器，灯光亮起即代表扩容成功。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ edl reset</span><br></pre></td></tr></table></figure>

<h4 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h4><p>这里有些常见的emcp&amp;emmc型号，仅供参考<br>(感谢 酷安@Zy143L 的整理)</p>
<p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618222342224.png" alt="image-20230618222342224"></p>
<p><img src="/./Image/%E9%9A%8F%E8%BA%ABWiFi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B.assets/image-20230618222350516.png" alt="image-20230618222350516"></p>
<h3 id="编译内核（debian）"><a href="#编译内核（debian）" class="headerlink" title="编译内核（debian）"></a>编译内核（debian）</h3><p>这里介绍如何使用linux定制自己的内核，推荐的发行版是Ubuntu 20.04。</p>
<h4 id="需要的软件包"><a href="#需要的软件包" class="headerlink" title="需要的软件包"></a>需要的软件包</h4><p>不同的发行版可能对软件包命名会有所不同，这里以Ubuntu 20.04的命名为例。</p>
<ul>
<li>binfmt-support</li>
<li>qemu-user-static</li>
<li>gcc-10-aarch64-linux-gnu</li>
<li>kernel-package</li>
<li>fakeroot</li>
<li>simg2img</li>
<li>img2simg</li>
<li>mkbootimg</li>
<li>bison</li>
</ul>
<h4 id="生成内核debian软件包"><a href="#生成内核debian软件包" class="headerlink" title="生成内核debian软件包"></a>生成内核debian软件包</h4><p>克隆linux内核,这里选择深度为1减少体积。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ git clone https://github.com/OpenStick/linux --depth=1</span><br></pre></td></tr></table></figure>

<p>开始编译</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ export CROSS_COMPILE=aarch64-linux-gnu-</span><br><span class="line">$ export ARCH=arm64</span><br><span class="line">$ make msm8916_defconfig</span><br><span class="line">$ make menuconfig</span><br><span class="line">$ make -j16</span><br></pre></td></tr></table></figure>

<p>生成debian格式的软件包</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ fakeroot make-kpkg  --initrd --cross-compile aarch64-linux-gnu- --arch arm64  kernel_image kernel_headers</span><br></pre></td></tr></table></figure>

<p>之后将生成的deb软件包(会在代码目录上层生成)，与<code>arch/arm64/boot/Image.gz</code>保留备用<br>将rootfs.img转换成img格式并挂载</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ simg2img rootfs.img root.img</span><br><span class="line">$ sudo mount root.img /mnt</span><br></pre></td></tr></table></figure>

<p>在chroot环境下，将前面生成的linux-image等deb安装包安装即可。注意要将安装完成后生成的<code>boot/initrd.img</code>取出备用（安装之前最好卸载原来的linux-image之类的软件包）。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ sudo  mount --bind /proc /mnt/proc </span><br><span class="line">$ sudo  mount --bind /dev /mnt/dev</span><br><span class="line">$ sudo  mount --bind /dev/pts /mnt/dev/pts</span><br><span class="line">$ sudo  mount --bind /sys /mnt/sys</span><br><span class="line">$ sudo  chroot /mnt</span><br></pre></td></tr></table></figure>

<p>安装完成后，解除所有挂载，将img再次转换为simg</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ img2simg root.img rootfs.img</span><br></pre></td></tr></table></figure>

<h4 id="生成boot-img"><a href="#生成boot-img" class="headerlink" title="生成boot.img"></a>生成boot.img</h4><p>取前面文件系统安装新内核后<code>/boot/initrd.img**</code>文件与内核编译阶段生成的<code>Image.gz</code>和<code>arch/arm64/boot/dts/qcom/</code>下对应设备的<code>*.dtb</code>备用<br>将devicetree(dtb)附在Image.gz之后</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cat Image.gz dtb &gt; kernel-dtb</span><br></pre></td></tr></table></figure>

<p>生成boot.img</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ mkbootimg \     </span><br><span class="line">        --base 0x80000000 \</span><br><span class="line">        --kernel_offset 0x00080000 \</span><br><span class="line">        --ramdisk_offset 0x02000000 \</span><br><span class="line">        --tags_offset 0x01e00000 \</span><br><span class="line">        --pagesize 2048 \</span><br><span class="line">        --second_offset 0x00f00000 \</span><br><span class="line">        --ramdisk initrd.img \</span><br><span class="line">        --cmdline &quot;earlycon root=PARTUUID=a7ab80e8-e9d1-e8cd-f157-93f69b1d141e console=ttyMSM0,115200 no_framebuffer=true rw&quot;\</span><br><span class="line">        --kernel kernel-dtb -o boot.img</span><br></pre></td></tr></table></figure>

<p>之后将两个img文件分别刷入对应分区即可。</p>
<h3 id="编译lk-bootloader"><a href="#编译lk-bootloader" class="headerlink" title="编译lk bootloader"></a>编译lk bootloader</h3><p>这里不再介绍lk2nd的编译，只介绍lk1st的编译方法。<br>原理其实很简单，交叉编译后得到aboot之后使用dragonboard提供的密匙签名即可。</p>
<ul>
<li>注意：不适用于开启secureboot的设备，如果你的设备不在支持列表之内，教程的有效性将得不到保证。</li>
<li>uz801和sp970由于某些原因在lk阶段点不亮led。</li>
<li>目前最为完美的机型是UFI001B&#x2F;C系列</li>
</ul>
<p>克隆lk2nd项目</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$  git clone https://github.com/OpenStick/lk2nd.git</span><br></pre></td></tr></table></figure>

<p>进入lk2nd目录使用以下指令开始编译</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">make TOOLCHAIN_PREFIX=arm-none-eabi- lk1st-msm8916 -j8</span><br></pre></td></tr></table></figure>

<p>之后会出现build-lk1st-msm8916目录，复制产物<strong>emmc_appsboot.mbn</strong>备用。</p>
<p>克隆签名工具qtestsign</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ git clone https://github.com/msm8916-mainline/qtestsign</span><br></pre></td></tr></table></figure>

<p>将前面的<strong>emmc_appsboot.mbn</strong>放入qtestsign目录，之后输入以下指令。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ ./qtestsign.py aboot emmc_appsboot.mbn</span><br></pre></td></tr></table></figure>

<p>之后会生成<strong>emmc_appsboot-test-signed.mbn</strong>,刷入即可。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ fastboot flash aboot emmc_appsboot-test-signed.mbn</span><br></pre></td></tr></table></figure></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://chaoqijiang.github.io">棨</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://chaoqijiang.github.io/2023/06/18/%E9%AB%98%E9%80%9A410%E9%9A%8F%E8%BA%ABwifi%E5%88%B7%E6%9C%BA%E6%95%99%E7%A8%8B/">https://chaoqijiang.github.io/2023/06/18/高通410随身wifi刷机教程/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://chaoqijiang.github.io" target="_blank">柊</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/protected/">protected</a><a class="post-meta__tags" href="/tags/%E5%88%B7%E6%9C%BA/">刷机</a><a class="post-meta__tags" href="/tags/%E6%90%9E%E4%BA%8B%E6%83%85/">搞事情</a><a class="post-meta__tags" href="/tags/%E9%9A%8F%E8%BA%ABWiFi/">随身WiFi</a></div><div class="post-share"><div class="social-share" data-image="/Image/avatar.png" data-sites="facebook,x,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2023/06/07/ESP8266%E5%BC%80%E5%8F%91%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99_%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/" title="ESP8266开发参考资料"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">ESP8266开发参考资料</div></div><div class="info-2"><div class="info-item-1">ESP8266开发参考资料，第三方库使用说明</div></div></div></a><a class="pagination-related" href="/2023/06/25/%E8%BA%AB%E4%BB%BD%E8%AF%81%E5%8F%B7%E7%A0%81%E7%9A%84%E7%BC%96%E7%A0%81%E8%A7%84%E5%88%99%E5%8F%8A%E6%A0%A1%E9%AA%8C/" title="第二代身份证号码的编码规则及校验"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">第二代身份证号码的编码规则及校验</div></div><div class="info-2"><div class="info-item-1">第二代身份证号码的编码规则及校验码的实现方法，供参考使用。</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2023/11/26/MC010%E6%99%BA%E8%83%BD%E6%8F%92%E5%BA%A7%E6%A0%B8%E5%BF%83%E6%8E%A7%E5%88%B6%E6%9D%BF%E5%BC%95%E8%84%9A%E5%AE%9A%E4%B9%89/" title="MC010智能插座核心控制板引脚定义"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-11-26</div><div class="info-item-2">MC010智能插座核心控制板引脚定义</div></div><div class="info-2"><div class="info-item-1">MC010智能插座核心控制板引脚定义</div></div></div></a><a class="pagination-related" href="/2025/10/08/AI%E6%8F%90%E7%A4%BA%E8%AF%8D_%E8%AF%95%E9%A2%98%E7%94%9F%E6%88%90/" title="AI提示词_试题生成"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-10-08</div><div class="info-item-2">AI提示词_试题生成</div></div><div class="info-2"><div class="info-item-1">AI提示词，用于根据提示信息生成对应的试题，帮助学习者检验理解深度。</div></div></div></a><a class="pagination-related" href="/2025/10/08/AI%E6%8F%90%E7%A4%BA%E8%AF%8D_%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E7%94%9F%E6%88%90/" title="AI提示词_学习笔记生成"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-10-08</div><div class="info-item-2">AI提示词_学习笔记生成</div></div><div class="info-2"><div class="info-item-1">AI提示词，用于引导AI生成学习笔记，根据提示的设定，对没有基础背景背景的小白生成学习笔记。</div></div></div></a><a class="pagination-related" href="/2023/06/07/ESP8266%E5%BC%95%E8%84%9A%E8%AF%B4%E6%98%8E/" title="ESP8266引脚说明"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-06-07</div><div class="info-item-2">ESP8266引脚说明</div></div><div class="info-2"><div class="info-item-1">ESP8266引脚说明</div></div></div></a><a class="pagination-related" href="/2023/12/01/Docker%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/" title="Docker基础教程"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-12-01</div><div class="info-item-2">Docker基础教程</div></div><div class="info-2"><div class="info-item-1">Docker基础教程</div></div></div></a><a class="pagination-related" href="/2023/06/07/ESP8266%E7%9B%B8%E5%85%B3%E6%A1%88%E4%BE%8B%E7%AC%94%E8%AE%B0/" title="ESP8266相关案例笔记"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-06-07</div><div class="info-item-2">ESP8266相关案例笔记</div></div><div class="info-2"><div class="info-item-1">ESP8266相关案例笔记</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/Image/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">棨</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">47</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">58</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">40</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="mailto:chaoqijiang@outlook.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%A0%B7%E5%BC%8F"><span class="toc-number">1.1.</span> <span class="toc-text">基本样式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98"><span class="toc-number">1.2.</span> <span class="toc-text">常见问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="toc-number">1.3.</span> <span class="toc-text">准备工作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E9%A9%B1%E5%8A%A8"><span class="toc-number">1.3.1.</span> <span class="toc-text">安装驱动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9B%E5%85%A59008%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">1.3.2.</span> <span class="toc-text">进入9008的方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#adb%E5%91%BD%E4%BB%A4%E8%BF%9B%E5%85%A5"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">adb命令进入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%9A%E8%BF%87%E6%8C%89%E9%94%AE%E8%BF%9B%E5%85%A5"><span class="toc-number">1.3.2.2.</span> <span class="toc-text">通过按键进入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E6%96%B9%E6%B3%95"><span class="toc-number">1.3.2.3.</span> <span class="toc-text">其他方法</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A4%87%E4%BB%BD"><span class="toc-number">2.</span> <span class="toc-text">备份</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%87%E4%BB%BD%E5%9B%BA%E4%BB%B6-miko"><span class="toc-number">2.1.</span> <span class="toc-text">备份固件-miko</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85Miko"><span class="toc-number">2.1.1.</span> <span class="toc-text">安装Miko</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#loader%E5%A4%87%E4%BB%BD"><span class="toc-number">2.1.2.</span> <span class="toc-text">loader备份</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%87%E4%BB%BD%E5%9B%BA%E4%BB%B6-QPT"><span class="toc-number">2.2.</span> <span class="toc-text">备份固件-QPT</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BF%80%E6%B4%BBQPT%EF%BC%88%E5%8F%AA%E9%9C%80%E8%A6%81%E6%BF%80%E6%B4%BB%E4%B8%80%E6%AC%A1%EF%BC%89"><span class="toc-number">2.2.1.</span> <span class="toc-text">激活QPT（只需要激活一次）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%87%E4%BB%BD-1"><span class="toc-number">2.2.2.</span> <span class="toc-text">备份</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%87%E4%BB%BD%E5%9F%BA%E5%B8%A6%EF%BC%88%E9%9C%80%E8%A6%81%E8%BF%9B%E8%A1%8Croot%E6%93%8D%E4%BD%9C%EF%BC%89"><span class="toc-number">2.3.</span> <span class="toc-text">备份基带（需要进行root操作）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E6%8F%90"><span class="toc-number">2.3.1.</span> <span class="toc-text">前提</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#root"><span class="toc-number">2.3.2.</span> <span class="toc-text">root</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%87%E4%BB%BD-2"><span class="toc-number">2.3.3.</span> <span class="toc-text">备份</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">2.4.</span> <span class="toc-text">注意事项</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%B7%E6%9C%BA"><span class="toc-number">3.</span> <span class="toc-text">刷机</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#android"><span class="toc-number">3.1.</span> <span class="toc-text">android</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Debian"><span class="toc-number">3.2.</span> <span class="toc-text">Debian</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%82%E8%BD%BDu%E7%9B%98%E3%80%81%E9%85%8D%E7%BD%AE%E5%BC%80%E5%90%AF%E5%90%AF%E5%8A%A8%E3%80%81%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6"><span class="toc-number">3.3.</span> <span class="toc-text">挂载u盘、配置开启启动、安装软件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%82%E8%BD%BDu%E7%9B%98"><span class="toc-number">3.3.1.</span> <span class="toc-text">挂载u盘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E5%BC%80%E6%9C%BA%E8%A1%8C%E4%B8%BA"><span class="toc-number">3.3.2.</span> <span class="toc-text">配置开机行为</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6"><span class="toc-number">3.4.</span> <span class="toc-text">安装软件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#samba%E5%85%B1%E4%BA%AB"><span class="toc-number">3.4.1.</span> <span class="toc-text">samba共享</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E4%B8%8E%E8%AF%B4%E6%98%8E"><span class="toc-number">3.4.1.1.</span> <span class="toc-text">注意事项与说明</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#aria2%E4%B8%8B%E8%BD%BD%E5%99%A8"><span class="toc-number">3.4.2.</span> <span class="toc-text">aria2下载器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9-1"><span class="toc-number">3.4.2.1.</span> <span class="toc-text">注意事项</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%9A%E8%BF%87aria2-net%E8%B0%83%E7%94%A8%EF%BC%8C%E6%88%96%E8%80%85%E8%87%AA%E5%BB%BAaria2-webui"><span class="toc-number">3.4.2.1.1.</span> <span class="toc-text">通过aria2.net调用，或者自建aria2 webui</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E7%AB%AF%E5%8F%A3"><span class="toc-number">3.4.2.1.2.</span> <span class="toc-text">使用端口</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lamp%E7%8E%AF%E5%A2%83%E4%B8%8Efilerun-%E7%BD%91%E9%A1%B5%E4%BA%91%E7%9B%98"><span class="toc-number">3.4.3.</span> <span class="toc-text">lamp环境与filerun 网页云盘</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEFire-RUN"><span class="toc-number">3.4.3.1.</span> <span class="toc-text">配置Fire RUN</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9-2"><span class="toc-number">3.4.3.2.</span> <span class="toc-text">注意事项</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#miniDLNA"><span class="toc-number">3.4.4.</span> <span class="toc-text">miniDLNA</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E4%BC%98%E5%8C%96"><span class="toc-number">3.4.5.</span> <span class="toc-text">移动硬盘优化</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%91%E7%A0%96%EF%BC%88%E5%88%B7%E5%9B%9E%E5%8E%9F%E5%A7%8B%E5%8C%85%EF%BC%89"><span class="toc-number">4.</span> <span class="toc-text">救砖（刷回原始包）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Miko"><span class="toc-number">4.1.</span> <span class="toc-text">Miko</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Debian%E9%A1%B9%E7%9B%AEWIKI"><span class="toc-number">5.</span> <span class="toc-text">Debian项目WIKI</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-number">5.1.</span> <span class="toc-text">概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E-OpenStick"><span class="toc-number">5.1.1.</span> <span class="toc-text">关于 OpenStick</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E5%A4%87%E5%85%B7%E4%BD%93%E9%85%8D%E7%BD%AE"><span class="toc-number">5.1.2.</span> <span class="toc-text">设备具体配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%84%E5%A4%96%E8%AE%BE%E5%AF%B9%E5%BA%94GPIO"><span class="toc-number">5.1.3.</span> <span class="toc-text">各外设对应GPIO</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E5%A4%87%E6%94%AF%E6%8C%81%E6%83%85%E5%86%B5"><span class="toc-number">5.1.4.</span> <span class="toc-text">设备支持情况</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8A%95%E7%A8%BF%E4%B8%8E%E5%A5%89%E7%8C%AE"><span class="toc-number">5.1.5.</span> <span class="toc-text">投稿与奉献</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A5%89%E7%8C%AE%E8%80%85"><span class="toc-number">5.1.6.</span> <span class="toc-text">奉献者</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E7%9B%B8%E5%85%B3%E9%93%BE%E6%8E%A5"><span class="toc-number">5.1.7.</span> <span class="toc-text">项目相关链接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B5%9E%E5%8A%A9"><span class="toc-number">5.1.8.</span> <span class="toc-text">赞助</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%80%E5%A7%8B%E6%8A%98%E8%85%BE"><span class="toc-number">5.2.</span> <span class="toc-text">开始折腾</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Linux-%E4%B8%8B%E7%9A%84%E5%88%B7%E6%9C%BA"><span class="toc-number">5.2.1.</span> <span class="toc-text">Linux 下的刷机</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Windows-%E4%B8%8B%E7%9A%84%E5%88%B7%E6%9C%BA"><span class="toc-number">5.2.2.</span> <span class="toc-text">Windows 下的刷机</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Windows-%E4%B8%8B%E7%9A%84%E5%B8%B8%E8%A7%81%E9%A9%B1%E5%8A%A8%E9%97%AE%E9%A2%98"><span class="toc-number">5.2.3.</span> <span class="toc-text">Windows 下的常见驱动问题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A6%82%E6%9E%9C%E4%BD%A0%E7%9A%84%E8%AE%BE%E5%A4%87%E8%A2%AB%E8%AF%86%E5%88%AB%E4%B8%BAadb-%E8%AE%BE%E5%A4%87"><span class="toc-number">5.2.3.1.</span> <span class="toc-text">如果你的设备被识别为adb 设备</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85RNDIS%E9%A9%B1%E5%8A%A8"><span class="toc-number">5.2.3.2.</span> <span class="toc-text">安装RNDIS驱动</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8"><span class="toc-number">5.3.</span> <span class="toc-text">基础使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Debian%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8"><span class="toc-number">5.3.1.</span> <span class="toc-text">Debian基础使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BF%A1%E6%81%AF"><span class="toc-number">5.3.1.1.</span> <span class="toc-text">基本信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E5%88%B0OpenStick"><span class="toc-number">5.3.1.2.</span> <span class="toc-text">连接到OpenStick</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8adb"><span class="toc-number">5.3.1.2.1.</span> <span class="toc-text">使用adb</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8ssh"><span class="toc-number">5.3.1.2.2.</span> <span class="toc-text">使用ssh</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%80%E5%90%AFwifi%E7%83%AD%E7%82%B9-%E4%B8%8D%E4%BE%9D%E8%B5%96%E7%BD%91%E6%A1%A5%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">5.3.1.3.</span> <span class="toc-text">开启wifi热点 (不依赖网桥的方法)</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B9%8B%E5%90%8E%E7%9A%84%E7%95%8C%E9%9D%A2%E5%A6%82%E4%B8%8B%E6%89%80%E7%A4%BA%EF%BC%9A"><span class="toc-number">5.3.1.3.1.</span> <span class="toc-text">之后的界面如下所示：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E8%BF%9E%E6%8E%A5"><span class="toc-number">5.3.1.3.2.</span> <span class="toc-text">创建一个连接</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAwifi%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%BF%9E%E6%8E%A5"><span class="toc-number">5.3.1.3.3.</span> <span class="toc-text">创建wifi类型的连接</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#device%E8%BE%93%E5%85%A5wlan0%EF%BC%8C%E5%85%B6%E4%BB%96%E9%80%89%E9%A1%B9%E6%8C%89%E7%85%A7%E4%BD%A0%E7%9A%84%E9%9C%80%E6%B1%82%E8%87%AA%E8%A1%8C%E5%A1%AB%E5%86%99"><span class="toc-number">5.3.1.3.4.</span> <span class="toc-text">device输入wlan0，其他选项按照你的需求自行填写</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AEip%E5%9C%B0%E5%9D%80-%E6%B3%A8%E6%84%8Fip%E7%B1%BB%E5%9E%8B%E5%BF%85%E9%A1%BB%E4%B8%BAshared%EF%BC%8Cip%E5%9C%B0%E5%9D%80%E5%BF%85%E9%A1%BB%E4%B8%BA192-168-68-1"><span class="toc-number">5.3.1.3.5.</span> <span class="toc-text">设置ip地址,注意ip类型必须为shared，ip地址必须为192.168.68.1</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BE%93%E5%85%A5%E4%BB%A5%E4%B8%8B%E6%8C%87%E4%BB%A4%E6%BF%80%E6%B4%BB%E8%BF%99%E4%B8%AA%E8%BF%9E%E6%8E%A5%EF%BC%8C%E6%BF%80%E6%B4%BB%E5%90%8Eusb-rndis%E5%8A%9F%E8%83%BD%E4%BC%9A%E5%A4%B1%E6%95%88%E3%80%82"><span class="toc-number">5.3.1.3.6.</span> <span class="toc-text">输入以下指令激活这个连接，激活后usb rndis功能会失效。</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%A6%81%E5%86%8D%E6%AC%A1%E4%BD%BF%E7%94%A8usb-rndis%EF%BC%8C%E5%8F%AF%E4%BB%A5down%E6%8E%89%E8%BF%99%E4%B8%AA%E8%BF%9E%E6%8E%A5"><span class="toc-number">5.3.1.3.7.</span> <span class="toc-text">要再次使用usb rndis，可以down掉这个连接</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98-1"><span class="toc-number">5.3.1.4.</span> <span class="toc-text">常见问题</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#UFI001C-SP970-UZ801-%E5%88%B7%E5%85%A5debian-zip%E5%90%8E%E5%B7%A5%E4%BD%9C%E4%B8%8D%E6%AD%A3%E5%B8%B8"><span class="toc-number">5.3.1.4.1.</span> <span class="toc-text">UFI001C&#x2F;SP970&#x2F;UZ801 刷入debian.zip后工作不正常</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9D%E6%AC%A1%E5%BC%80%E6%9C%BA%E6%89%A7%E8%A1%8Capt%E6%97%B6%E6%8A%A5%E9%94%99"><span class="toc-number">5.3.1.4.2.</span> <span class="toc-text">初次开机执行apt时报错</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#adb%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%94%A8%E4%B8%8D%E4%BA%86nmtui%E7%AD%89%E5%B8%A6%E5%9B%BE%E5%BD%A2%E7%9A%84%E5%BA%94%E7%94%A8"><span class="toc-number">5.3.1.4.3.</span> <span class="toc-text">adb环境下用不了nmtui等带图形的应用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#root%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8ssh%E7%99%BB%E5%BD%95%E4%B8%8D%E4%BA%86"><span class="toc-number">5.3.1.4.4.</span> <span class="toc-text">root用户使用ssh登录不了</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AE%89%E8%A3%85nano%E7%BC%96%E8%BE%91%E5%99%A8%EF%BC%88%E9%9C%80%E6%8F%92%E5%85%A5SIM%E5%8D%A1%E6%88%96%E8%BF%9E%E6%8E%A5wifi%EF%BC%89"><span class="toc-number">5.3.1.4.4.1.</span> <span class="toc-text">安装nano编辑器（需插入SIM卡或连接wifi）</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%BC%96%E8%BE%91sshd-config"><span class="toc-number">5.3.1.4.4.2.</span> <span class="toc-text">编辑sshd_config</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%87%8D%E5%90%AFOpenStick"><span class="toc-number">5.3.1.5.</span> <span class="toc-text">重启OpenStick</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#rndis%E4%B8%8Ewifi%E7%83%AD%E7%82%B9%E5%85%B1%E5%AD%98-debian"><span class="toc-number">5.3.2.</span> <span class="toc-text">rndis与wifi热点共存(debian)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B7%E4%BD%93%E6%AD%A5%E9%AA%A4"><span class="toc-number">5.3.2.1.</span> <span class="toc-text">具体步骤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6led%E8%A1%8C%E4%B8%BA"><span class="toc-number">5.3.3.</span> <span class="toc-text">控制led行为</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6usb%E8%A1%8C%E4%B8%BA"><span class="toc-number">5.3.4.</span> <span class="toc-text">控制usb行为</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%87%E6%8D%A2USB%E5%B7%A5%E4%BD%9C%E6%A8%A1%E5%BC%8F"><span class="toc-number">5.3.4.1.</span> <span class="toc-text">切换USB工作模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E-Gadget-Controller"><span class="toc-number">5.3.4.2.</span> <span class="toc-text">关于 Gadget Controller</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lk-bootloader%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">5.3.5.</span> <span class="toc-text">lk bootloader基本使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E6%97%A5%E5%BF%97"><span class="toc-number">5.3.5.1.</span> <span class="toc-text">获取日志</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8F%90%E5%8F%96%E5%88%86%E5%8C%BA%E5%86%85%E5%AE%B9"><span class="toc-number">5.3.5.2.</span> <span class="toc-text">提取分区内容</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%9B%E5%85%A5edl%E6%A8%A1%E5%BC%8F"><span class="toc-number">5.3.5.3.</span> <span class="toc-text">进入edl模式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#emali%E7%9F%AD%E4%BF%A1%E8%BD%AC%E5%8F%91"><span class="toc-number">5.3.6.</span> <span class="toc-text">emali短信转发</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E8%BD%AC%E5%8F%91%E5%89%8D%E8%AF%B7%E8%A1%A5%E5%85%A8smtp-py%E5%BC%80%E5%A4%B4%E7%9A%84smtp%E4%BF%A1%E6%81%AF"><span class="toc-number">5.4.</span> <span class="toc-text">使用转发前请补全smtp.py开头的smtp信息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%AB%98%E7%BA%A7%E7%8E%A9%E6%B3%95"><span class="toc-number">5.5.</span> <span class="toc-text">高级玩法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#emcp%E6%89%A9%E5%AE%B9"><span class="toc-number">5.5.1.</span> <span class="toc-text">emcp扩容</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A1%AC%E4%BB%B6"><span class="toc-number">5.5.1.1.</span> <span class="toc-text">硬件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BD%AF%E4%BB%B6"><span class="toc-number">5.5.1.2.</span> <span class="toc-text">软件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">5.5.1.3.</span> <span class="toc-text">参考资料</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E8%AF%91%E5%86%85%E6%A0%B8%EF%BC%88debian%EF%BC%89"><span class="toc-number">5.5.2.</span> <span class="toc-text">编译内核（debian）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9C%80%E8%A6%81%E7%9A%84%E8%BD%AF%E4%BB%B6%E5%8C%85"><span class="toc-number">5.5.2.1.</span> <span class="toc-text">需要的软件包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%9F%E6%88%90%E5%86%85%E6%A0%B8debian%E8%BD%AF%E4%BB%B6%E5%8C%85"><span class="toc-number">5.5.2.2.</span> <span class="toc-text">生成内核debian软件包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%9F%E6%88%90boot-img"><span class="toc-number">5.5.2.3.</span> <span class="toc-text">生成boot.img</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E8%AF%91lk-bootloader"><span class="toc-number">5.5.3.</span> <span class="toc-text">编译lk bootloader</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/10/12/Hexo%E6%96%B0%E5%A2%9E%E5%88%86%E7%B1%BB%E6%A0%87%E7%AD%BE%E4%B8%8E%E8%87%AA%E5%AE%9A%E4%B9%89%E9%A1%B5%E9%9D%A2%E8%AF%A6%E8%A7%A3/" title="Hexo 新增分类、标签与自定义页面详解">Hexo 新增分类、标签与自定义页面详解</a><time datetime="2025-10-12T05:46:03.000Z" title="发表于 2025-10-12 13:46:03">2025-10-12</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/10/08/%E9%AB%98%E5%8F%AF%E7%94%A8%E9%AB%98%E5%B9%B6%E5%8F%91%E5%90%8E%E7%AB%AF%E6%9E%B6%E6%9E%84%E9%80%9A%E7%94%A8%E8%93%9D%E5%9B%BE/" title="高可用高并发后端架构通用蓝图">高可用高并发后端架构通用蓝图</a><time datetime="2025-10-08T15:42:00.000Z" title="发表于 2025-10-08 23:42:00">2025-10-08</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/10/08/AI%E6%8F%90%E7%A4%BA%E8%AF%8D_%E8%AF%95%E9%A2%98%E7%94%9F%E6%88%90/" title="AI提示词_试题生成">AI提示词_试题生成</a><time datetime="2025-10-08T15:15:00.000Z" title="发表于 2025-10-08 23:15:00">2025-10-08</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/10/08/AI%E6%8F%90%E7%A4%BA%E8%AF%8D_%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E7%94%9F%E6%88%90/" title="AI提示词_学习笔记生成">AI提示词_学习笔记生成</a><time datetime="2025-10-08T15:15:00.000Z" title="发表于 2025-10-08 23:15:00">2025-10-08</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/10/08/Golang_swag/" title="Golang swag 库">Golang swag 库</a><time datetime="2025-10-08T15:07:00.000Z" title="发表于 2025-10-08 23:07:00">2025-10-08</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/Image/topImage.jpg);"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2023 - 2025 By 棨</span><span class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 8.0.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.1</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.1"></script><script src="/js/main.js?v=5.5.1"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script><div class="js-pjax"><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = `%%{init:{ 'theme':'${theme}'}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (true) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid@11.12.0/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script></div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/fireworks.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden="hidden"></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="local-search-input"><input placeholder="搜索文章" type="text"/></div><hr/><div id="local-search-results"></div><div class="ais-Pagination" id="local-search-pagination" style="display:none;"><ul class="ais-Pagination-list"></ul></div><div id="local-search-stats"></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=5.5.1"></script></div></div></body></html>